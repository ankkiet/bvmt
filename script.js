const _0x8f774e=_0x2db1;(function(_0x20b469,_0xb92c1a){const _0x5cc3d3=_0x2db1,_0x18200f=_0x20b469();while(!![]){try{const _0x31fbef=-parseInt(_0x5cc3d3(0x331))/0x1*(parseInt(_0x5cc3d3(0x1d5))/0x2)+-parseInt(_0x5cc3d3(0x344))/0x3*(parseInt(_0x5cc3d3(0x2b4))/0x4)+parseInt(_0x5cc3d3(0x276))/0x5*(parseInt(_0x5cc3d3(0x2a5))/0x6)+parseInt(_0x5cc3d3(0x203))/0x7*(parseInt(_0x5cc3d3(0x2e7))/0x8)+-parseInt(_0x5cc3d3(0x267))/0x9+-parseInt(_0x5cc3d3(0x2c6))/0xa*(-parseInt(_0x5cc3d3(0x307))/0xb)+parseInt(_0x5cc3d3(0x2f7))/0xc;if(_0x31fbef===_0xb92c1a)break;else _0x18200f['push'](_0x18200f['shift']());}catch(_0x401aa3){_0x18200f['push'](_0x18200f['shift']());}}}(_0x1db2,0xbc7e6));import{initializeApp}from'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';import{getAuth,signInWithPopup,GoogleAuthProvider,signOut,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';import{getFirestore,collection,addDoc,getDocs,onSnapshot,query,orderBy,serverTimestamp,doc,setDoc,getDoc,updateDoc,deleteDoc,arrayUnion,arrayRemove,where,increment,limit}from'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';const firebaseConfig={'apiKey':_0x8f774e(0x2f6),'authDomain':_0x8f774e(0x3b8),'projectId':_0x8f774e(0x3c1),'storageBucket':'a2k41nvc-36b0b.firebasestorage.app','messagingSenderId':_0x8f774e(0x392),'appId':_0x8f774e(0x24e)},app=initializeApp(firebaseConfig),auth=getAuth(app),db=getFirestore(app),provider=new GoogleAuthProvider(),CLOUD_NAME=_0x8f774e(0x231),UPLOAD_PRESET=_0x8f774e(0x2bd),ADMIN_EMAILS=[_0x8f774e(0x204),_0x8f774e(0x2d3)];function _0x1db2(){const _0x28691e=['cd-contest','Nh·∫≠p\x20ƒë·ªß\x20t√™n\x20v√†\x20Key!','ƒêang\x20x·ª≠\x20l√Ω...','locks','H·ªØu\x20c∆°','<div\x20class=\x22gallery-item\x22\x20style=\x22padding:10px;text-align:center\x22><div\x20class=\x22','39jZOsvO','lock-archive','likes','cfg-ai-key','activities','removeAIKey','googleSheetUrl','append','active','bin-organic','\x0aB·∫°n\x20l√†\x20Green\x20Bot\x20-\x20Tr·ª£\x20l√Ω\x20·∫£o\x20AI\x20th√¢n\x20thi·ªán\x20c·ªßa\x20l·ªõp\x20A2K41\x20v√†\x20tr∆∞·ªùng\x20Green\x20School.\x0aB·∫°n\x20x∆∞ng\x20l√†\x20\x27T·ªõ\x27\x20v√†\x20g·ªçi\x20ng∆∞·ªùi\x20d√πng\x20l√†\x20\x27C·∫≠u\x27.\x20D√πng\x20nhi·ªÅu\x20emoji\x20d·ªÖ\x20th∆∞∆°ng\x20(üå±,\x20ü§ñ,\x20‚ú®).\x0a\x0aH√ÉY\x20GHI\x20NH·ªö\x20TH√îNG\x20TIN\x20V·ªÄ\x20WEBSITE\x20N√ÄY\x20ƒê·ªÇ\x20H·ªñ\x20TR·ª¢:\x0a1.\x20Trang\x20Ch·ªß\x20(Home):\x20Xem\x20th√¥ng\x20b√°o,\x20tin\x20t·ª©c\x20n·ªïi\x20b·∫≠t\x20v√†\x20·∫£nh\x20\x27Top\x201\x20y√™u\x20th√≠ch\x27.\x0a2.\x20G√≥c\x20Xanh\x20(Green\x20Class):\x20N∆°i\x20upload\x20·∫£nh\x20ho·∫°t\x20ƒë·ªông\x20m√¥i\x20tr∆∞·ªùng.\x20C√≥\x20t√≠nh\x20nƒÉng\x20\x27AI\x20Soi\x20R√°c\x27\x20ƒë·ªÉ\x20nh·∫≠n\x20di·ªán\x20r√°c\x20th·∫£i.\x0a3.\x20Thi\x20ƒêua\x20(Contest):\x20N∆°i\x20c√°c\x20t·ªï/c√°\x20nh√¢n\x20upload\x20b√°o\x20c√°o\x20th√†nh\x20t√≠ch\x20ƒë·ªÉ\x20c·ªông\x20ƒëi·ªÉm\x20thi\x20ƒëua.\x0a4.\x20L∆∞u\x20Tr·ªØ\x20(Archive):\x20Xem\x20l·∫°i\x20c√°c\x20·∫£nh\x20c≈©\x20t·ª´\x20c√°c\x20ƒë·ª£t\x20tr∆∞·ªõc.\x0a5.\x20Ho·∫°t\x20ƒê·ªông\x20(Activities):\x20Xem\x20l·ªãch\x20\x27ƒê·ªïi\x20gi·∫•y\x20l·∫•y\x20c√¢y\x27\x20v√†\x20c√°c\x20tin\x20t·ª©c\x20t√¨nh\x20nguy·ªán.\x0a6.\x20Tra\x20C·ª©u\x20(Guide):\x20T·ª´\x20ƒëi·ªÉn\x20ph√¢n\x20lo·∫°i\x20r√°c\x20(V·ªè\x20s·ªØa,\x20pin,\x20l√°\x20c√¢y...).\x0a7.\x20T√†i\x20Kho·∫£n\x20(Profile):\x20Ch·ªânh\x20s·ª≠a\x20t√™n,\x20avatar\x20v√†\x20xem\x20l·ªõp\x20c·ªßa\x20m√¨nh.\x0a\x0aN·∫øu\x20ng∆∞·ªùi\x20d√πng\x20h·ªèi\x20l√†m\x20sao\x20ƒë·ªÉ\x20ƒëƒÉng\x20·∫£nh?\x20->\x20H∆∞·ªõng\x20d·∫´n\x20v√†o\x20m·ª•c\x20\x27G√≥c\x20Xanh\x27\x20ho·∫∑c\x20\x27Thi\x20ƒêua\x27.\x0aN·∫øu\x20ng∆∞·ªùi\x20d√πng\x20h·ªèi\x20v·ªÅ\x20r√°c?\x20->\x20H∆∞·ªõng\x20d·∫´n\x20d√πng\x20t√≠nh\x20nƒÉng\x20\x27AI\x20Soi\x20R√°c\x27\x20·ªü\x20G√≥c\x20Xanh.\x0aH√£y\x20lu√¥n\x20tr·∫£\x20l·ªùi\x20ng·∫Øn\x20g·ªçn,\x20vui\x20v·∫ª\x20v√†\x20h∆∞·ªõng\x20d·∫´n\x20c·ª•\x20th·ªÉ\x20v√†o\x20ƒë√∫ng\x20m·ª•c\x20tr√™n\x20web.\x0a','undefined','src','quickReply','bio','vi-VN','Ng√†y\x20ƒëƒÉng','\x22\x20style=\x22font-weight:bold\x22>','<tr><td>','PlayerState','L·ªói\x20t·∫£i\x20·∫£nh:\x20','border','<span\x20style=\x22position:absolute;\x20top:10px;\x20left:10px;\x20background:var(--info);\x20color:white;\x20padding:4px\x208px;\x20border-radius:4px;\x20font-size:0.7rem;\x20font-weight:bold;\x20z-index:5;\x22>Thi\x20ƒêua</span>','\x22\x20class=\x22gallery-img\x22></div><div\x20class=\x22gallery-info\x22><div\x20class=\x22gallery-title\x22>','entries','lock-contest','lock-guide','top','addAIKey','addWorksheet','ƒê√£\x20th√™m\x20Key\x20m·ªõi!','empty','cfg-sheet-url','appendChild','sendMessageToAI','lb-author-name','/upload/','guide','Thi\x20ƒêua','authorAvatar','ƒê√£\x20l∆∞u\x20Link\x20Google\x20Sheet!','archivedAt','Ng√†y\x20ƒëƒÉng\x20k√Ω','stringify','onerror','mob-','</span></div><span><i\x20class=\x22fas\x20fa-heart\x22\x20style=\x22color:','toLowerCase','opera','then','upload-overlay','touchstart','filterTrash','</b>\x20ƒë√£\x20th·∫£\x20tim\x20·∫£nh\x20c·ªßa\x20b·∫°n\x20‚ù§Ô∏è','closeNotification','type','var(--primary)','ai-input','</span>\x20','https://via.placeholder.com/30','isRead','\x22></i>\x20','ƒêang\x20t·∫°o\x20file\x20Excel\x20chu·∫©n...','cfg-maintenance','</span>\x20<div><button\x20class=\x22btn\x20btn-sm\x22\x20onclick=\x22playSong(\x27','archive-season-select','email','rank-gallery-user','<div\x20class=\x22notif-item\x20','togBan','Login\x20clicked','B·∫°n\x20ch·∫Øc\x20ch·∫Øn\x20mu·ªën\x20x√≥a\x20b√†i\x20vi·∫øt\x20n√†y\x20ch·ª©?','lb-like-btn','userAgent','remove','showPage','KH√ìA','Link\x20·∫£nh','279516631226','banned','<div\x20style=\x22display:flex;\x20justify-content:space-between;\x20padding:10px;\x20border-bottom:1px\x20solid\x20var(--border);\x20','indexOf','settings','p-custom-id','</td><td>','\x27)\x22\x20style=\x22color:red;margin-left:5px\x22><i\x20class=\x22fas\x20fa-trash\x22></i></button></div>','Nh·∫≠p\x20m√¥\x20t·∫£\x20m·ªõi:','displayName','H·∫æT\x20GI·ªú','data','unsubscribes','POST','archives_meta','home','lb-comment-item','\x22><i\x20class=\x22fas\x20fa-ellipsis-h\x20fa-fade\x22></i></div>','dark-icon','R√°c\x20kh√°c','comments','prompt','gallery','updateDeadlines','\x22\x20onclick=\x22clickNotification(\x27','\x22><td><span\x20class=\x22rank-num\x22>','<div\x20class=\x22owner-controls\x22><button\x20class=\x22ctrl-btn\x22\x20onclick=\x22event.stopPropagation();editPost(\x27','edit-class','solid','addRow','trashContainer','archive-search','click','FFFFFFFF','archived','feat-author','.page-section','authorName','a2k41nvc-36b0b.firebaseapp.com','hash','dark-mode','customID','\x27,\x20\x27','ptr-loader','eachCell','clientY','playVideo','a2k41nvc-36b0b','menu-pc-admin','L·ªói\x20g·ª≠i\x20th√¥ng\x20b√°o:','notif-dropdown','avatar','load','clickNotification','ai-loading-','</td><td\x20style=\x22text-align:right;font-weight:bold;color:var(--primary)\x22>','HTTP\x20','\x27,1)\x22\x20style=\x22color:red\x22>Kh√≥a</button>','filter','log','config','font','profile-out','playing','trim','Nh·∫≠p\x20ƒë·ªß\x20t√™n\x20v√†\x20link!','clientX','ƒê√£\x20th√™m\x20b√†i\x20h√°t!','p-name','files','\x22\x20class=\x22lb-comment-avatar\x22><div\x20class=\x22lb-comment-content\x22><div\x20class=\x22lb-comment-bubble\x22><span\x20class=\x22lb-comment-user\x22>','split','scale(1)','liked','toLocaleString','-70px','menu-pc-','content-','var(--text)','‚õî\x20B·∫°n\x20kh√¥ng\x20c√≥\x20quy·ªÅn\x20truy\x20c·∫≠p\x20khu\x20v·ª±c\x20n√†y!','lb-like-count','</span>','1192732onYtJf','AI\x20ƒëang\x20soi\x20r√°c...','V·ªè\x20tr√°i\x20c√¢y','<div\x20class=\x22gallery-item\x22\x20onclick=\x22openLightbox(\x27','fill','val','users','<div\x20class=\x22ai-msg\x20user\x22>','editPostFromLB','playlist','Ph√¢n\x20lo·∫°i\x20r√°c.','aiKeys','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>','length','touchmove','exportExcel','Tra\x20C·ª©u','musicId','greenclass','reload','now','setItem','contains','new-song-name','uploadMode','floor','T√™n\x20ng∆∞·ªùi\x20d√πng','loadVideoById','hashchange','all','open','transform','G√≥c\x20Xanh','music-icon-display','seconds','</div><div\x20class=\x22gallery-meta\x22><div\x20style=\x22display:flex;align-items:center\x22><img\x20src=\x22','checkLoginAndUpload','https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=','trash','px\x20','collection','Admin_xinhxinh','color','https://script.google.com/macros/s/AKfycbzilw2SHG74sfCGNktGLuo46xkLNzVSVl6T3HbjXoWAsm9_CmXmuZQmbDxIOJ5cRhyX/exec','\x27)\x22><i\x20class=\x22fas\x20fa-pen\x22></i></button><button\x20class=\x22ctrl-btn\x22\x20onclick=\x22event.stopPropagation();deletePost(\x27','serviceWorker','1268519xnsAuv','kiet0905478167@gmail.com','profile-in','var(--text-sec)','notif-list-ui','member','updateLocks','@chua_co_id','dark','active-menu','push','script','\x27)\x22>üóë</button></div></div>','Th√†nh\x20vi√™n\x20l·ªõp\x20','last_notif_id','lb-custom-id','ƒê√£\x20l∆∞u!','forEach','jfKfPfyJRdk','title','lock-activities','match','changedTouches','Okie,\x20t·ªõ\x20nh·ªõ\x20r·ªìi!\x20T·ªõ\x20l√†\x20chuy√™n\x20gia\x20v·ªÅ\x20web\x20A2K41\x20ƒë√¢y!\x20üå±','getRow','p-avatar','classList','thin','transformOrigin','@unknown','updateMainConfig','rank-contest-user','closeLightbox','\x22\x20class=\x22notif-avatar\x22><div\x20class=\x22notif-body\x22><p>','block','pattern','style','player','innerHTML','pauseVideo','tab-ar-','handleLogout','X√≥a\x20tk?','\x27)\x22><div\x20class=\x22gallery-img-container\x22><img\x20src=\x22','https://via.placeholder.com/35','date','dekxvneap','toggleDarkMode','T√∫i\x20nilon','gallery-grid','S·ªë\x20l·∫ßn\x20ƒëƒÉng\x20nh·∫≠p','notifications','desc','loader','<i\x20class=\x22fas\x20fa-download\x22></i><span>T·∫£iApp</span>','L·ªõp','link','value','üõ†\x20Qu·∫£n\x20Tr·ªã\x20H·ªá\x20Th·ªëng','notification-popup','archive','openLightbox','</div><div\x20class=\x22gallery-meta\x22><span>','submit','L∆∞u\x20tr·ªØ?','TOP\x201\x20ƒê∆Ø·ª¢C\x20Y√äU\x20TH√çCH','dblclick','label','Kh√°c','show','add','upload-loading-text','Loading...','trashSearchInput','vendor','1:279516631226:web:99012883ed7923ab5c3283','result','Player','.xlsx','lb-comments-list','class','addEventListener','red','updateAIConfig','lock-home','showNotification','https://via.placeholder.com/20','center','\x27,\x27','</strong></div>','Chai\x20nh·ª±a','<div\x20class=\x22ai-msg\x20bot\x22\x20id=\x22','Ng∆∞·ªùi\x20ƒëƒÉng','touchend','https://api.cloudinary.com/v1_1/','contest','display','music-playlist-container','scrollTop','parts','6411717fYDHtq','unread','ai-key-list','pinPost','author','admin-notif-msg','archive-grid','Green\x20School\x20-\x20','ƒê√£\x20g·ª≠i\x20th√¥ng\x20b√°o!','\x27)\x22>','firstChild','\x27)\x22><img\x20src=\x22','toggleAIChat','btn-install-pc','left','20WEetsr','deleteSong','<button\x20onclick=\x22togBan(\x27','secure_url','ƒê√£\x20ph√°t\x20b√†i\x20n√†y!','uid','getBoundingClientRect','catch','time-gallery','switchArchiveTab','authorID','edit-custom-id','toggleNotifDropdown','deadlines','height','ƒêang\x20test...','AIzaSyAnOwbqmpQcOu_ERINF4nSfEL4ZW95fiGc','<div\x20class=\x22empty-notif\x22>Ch∆∞a\x20c√≥\x20th√¥ng\x20b√°o\x20n√†o</div>','lb-details-sheet','\x27)\x22><i\x20class=\x22fas\x20fa-share\x22></i>\x20Share</button></div></div></div>','rotate(','GreenSchool_','Tim','archiveLabel','bin-other','Tr·ªìng\x20th√™m\x20c√¢y\x20xanh.','lb-zoom-area','sendAdminNotification','<option\x20value=\x22ALL\x22>üìÇ\x20T·∫•t\x20c·∫£\x20·∫£nh\x20l∆∞u\x20tr·ªØ</option>','createdAt','Vui\x20l√≤ng\x20ƒëƒÉng\x20nh·∫≠p\x20quy·ªÅn\x20Admin\x20tr∆∞·ªõc!','innerText','-70','light','feat-desc','feat-img','url','lb-desc','role','<option\x20value=\x22','lastActive','loadAdminData','toggle','theme','<div\x20class=\x22lb-comment-item\x22><img\x20src=\x22','error','#ccc','639414YeWyWQ','Ch∆∞a\x20c·∫≠p\x20nh·∫≠t\x20l·ªõp','createElement','FBAN','fas\x20fa-sun','includes','Vui\x20l√≤ng\x20ƒëƒÉng\x20nh·∫≠p!','ai-window','<tr><td\x20style=\x27text-align:center\x27>Ch∆∞a\x20c√≥\x20d·ªØ\x20li·ªáu</td></tr>','deletePostFromLB','PLAYING','/image/upload','</div>','markAllRead','inline-block','470324LztFBS','addNewSong','json','maintenance-overlay','btn-install-mob','Instagram','no-cors','status','home-login-area','a2k41nvc_upload','scrollY','\x22><span>','flex','.lb-btn-pin','userChoice','https://www.youtube.com/iframe_api','<span\x20style=\x22position:absolute;\x20top:10px;\x20left:10px;\x20background:#ff9800;\x20color:white;\x20padding:4px\x208px;\x20border-radius:4px;\x20font-size:0.7rem;\x20font-weight:bold;\x20z-index:5;\x22>AI\x20Soi\x20R√°c</span>','preventDefault','31710ZdrEyW','bin-recycle','T√™n\x20ƒë·ª£t:','zoomed','<tr\x20class=\x22','cd-gallery','message','fillChat','AI\x20l·ªói,\x20kh√¥ng\x20th·ªÉ\x20ph√¢n\x20lo·∫°i.','none','onYouTubeIframeAPIReady','fas\x20fa-moon','p-email','anhkiet119209@gmail.com','.mobile-nav-inner','new-song-url','application/vnd.openxmlformats-officedocument.spreadsheetml.sheet','columns','getElementById','M·∫∑c\x20ƒë·ªãnh','/upload/f_auto,q_auto/','profile','text','toISOString','daily-tip','deletePost','nav-bell-dot','Xong!','sort','notif-text','admin','edit-name','</option>','56thAtah','ALL','<img\x20src=\x22','time-contest','featured','className','updateSheetConfig','</b>\x20ƒë√£\x20b√¨nh\x20lu·∫≠n:\x20\x22','model','maintenance','file','querySelector','div','Synced\x20to\x20Google\x20Sheet','#e53935','AIzaSyCJ_XI_fq-yJC909jb9KLIKg3AfGdm6hNs','12054360DxIlyX','parentNode','body','T·∫•t\x20c·∫£\x20Key\x20AI\x20ƒë·ªÅu\x20b·∫≠n\x20ho·∫∑c\x20l·ªói.','exists','image/jpeg','testAIConnection','lightbox','\x27)\x22>X</button></div>','name','mob-admin','onload','S·ª≠a:','V·ª´a\x20xong','application/json','\x22\x20class=\x22post-avatar\x22>\x20<span>','3157tkTwiT','feat-title','FBAV','lb-img','10px','executeUpload','<b>','cloudinary.com','register','AI\x20ƒëang\x20vi·∫øt\x20caption...','photoURL','ai-messages','L·ªói\x20t·∫£i\x20·∫£nh!','recipientUid','new-key-name','main-login-btn','T·∫Øt\x20ƒë√®n\x20khi\x20ra\x20kh·ªèi\x20l·ªõp.','T√°i\x20ch·∫ø','L√°\x20c√¢y','upload_preset','alignment','getPlayerState','slice','checked','playSong','querySelectorAll','lock-greenclass','loadArchiveGrid','xlsx','background:rgba(46,\x20125,\x2050,\x200.1);\x20border-left:4px\x20solid\x20green;','SW\x20Registered!','location','Active','getItem','rank-top-1','new-key-val','archiveSeason','featured-post','edit-bio','touches','getTime','</span></div></div></div>','1VhPlEE','X√°c\x20nh·∫≠n?','requestDeleteAccount','writeBuffer','Zalo','random','SW\x20Error:','comment','scrollHeight','eachRow','</p><span\x20class=\x22notif-time\x22>','loginCount','nav.pc-nav\x20ul'];_0x1db2=function(){return _0x28691e;};return _0x1db2();}let currentUser=null,currentCollection=_0x8f774e(0x3a8),currentImgId=null,currentImgCollection=null,activeArchiveTab=_0x8f774e(0x3a8),musicId=_0x8f774e(0x215),aiKeys=[{'name':_0x8f774e(0x2d9),'val':_0x8f774e(0x286)}],chatHistory=[];const SYSTEM_PROMPT=_0x8f774e(0x34e);chatHistory[_0x8f774e(0x20d)]({'role':'user','parts':[{'text':SYSTEM_PROMPT}]}),chatHistory[_0x8f774e(0x20d)]({'role':_0x8f774e(0x2ef),'parts':[{'text':_0x8f774e(0x21a)}]});let googleSheetUrl=_0x8f774e(0x200);const isAdmin=_0x33cced=>ADMIN_EMAILS['includes'](_0x33cced),State={'unsubscribes':{}},Utils={'loader':(_0xefe1b1,_0x2a4020=_0x8f774e(0x340))=>{const _0x2842ac=_0x8f774e;document['getElementById'](_0x2842ac(0x376))[_0x2842ac(0x227)][_0x2842ac(0x263)]=_0xefe1b1?'flex':_0x2842ac(0x2cf),document[_0x2842ac(0x2d8)](_0x2842ac(0x24a))[_0x2842ac(0x295)]=_0x2a4020;}};window[_0x8f774e(0x232)]=()=>{const _0x4d5097=_0x8f774e;document[_0x4d5097(0x2f9)][_0x4d5097(0x21d)][_0x4d5097(0x2a0)]('dark-mode');const _0xcf7bdb=document[_0x4d5097(0x2f9)][_0x4d5097(0x21d)][_0x4d5097(0x1eb)](_0x4d5097(0x3ba)),_0x33eca1=document['getElementById'](_0x4d5097(0x3a4));_0x33eca1[_0x4d5097(0x2ec)]=_0xcf7bdb?_0x4d5097(0x2a9):_0x4d5097(0x2d1),localStorage[_0x4d5097(0x1ea)](_0x4d5097(0x2a1),_0xcf7bdb?_0x4d5097(0x20b):_0x4d5097(0x297));},window[_0x8f774e(0x254)]('load',()=>{const _0x41b895=_0x8f774e;localStorage[_0x41b895(0x328)](_0x41b895(0x2a1))===_0x41b895(0x20b)&&window[_0x41b895(0x232)]();const _0x1f8c5c=navigator[_0x41b895(0x38d)]||navigator[_0x41b895(0x24d)]||window[_0x41b895(0x374)];(_0x1f8c5c['indexOf'](_0x41b895(0x2b9))>-0x1||_0x1f8c5c['indexOf'](_0x41b895(0x2a8))>-0x1||_0x1f8c5c[_0x41b895(0x395)](_0x41b895(0x309))>-0x1||_0x1f8c5c[_0x41b895(0x395)](_0x41b895(0x335))>-0x1)&&(document[_0x41b895(0x2d8)]('webview-warning')[_0x41b895(0x227)]['display']=_0x41b895(0x2c0)),handleRoute();});let startY=0x0;const ptrElement=document[_0x8f774e(0x2d8)](_0x8f774e(0x3bd)),ptrIcon=ptrElement['querySelector']('.ptr-icon');window[_0x8f774e(0x254)](_0x8f774e(0x377),_0x739665=>{const _0xb1b34f=_0x8f774e;window[_0xb1b34f(0x2be)]===0x0&&(startY=_0x739665[_0xb1b34f(0x32e)][0x0][_0xb1b34f(0x3bf)]);},{'passive':!![]}),window[_0x8f774e(0x254)](_0x8f774e(0x1e3),_0x528440=>{const _0x4ddea4=_0x8f774e,_0x3ad91e=_0x528440[_0x4ddea4(0x32e)][0x0]['clientY'],_0x2ee851=_0x3ad91e-startY;window[_0x4ddea4(0x2be)]===0x0&&_0x2ee851>0x0&&(_0x2ee851<0xfa&&(ptrElement['style'][_0x4ddea4(0x35f)]=_0x2ee851/2.5-0x46+'px',ptrIcon[_0x4ddea4(0x227)][_0x4ddea4(0x1f4)]=_0x4ddea4(0x28a)+_0x2ee851*0x2+'deg)'));},{'passive':![]}),window[_0x8f774e(0x254)](_0x8f774e(0x260),_0x2b545e=>{const _0x4bda89=_0x8f774e,_0x2bde82=parseInt(ptrElement[_0x4bda89(0x227)][_0x4bda89(0x35f)]||_0x4bda89(0x296));_0x2bde82>0xa?(ptrElement[_0x4bda89(0x227)][_0x4bda89(0x35f)]=_0x4bda89(0x30b),ptrIcon[_0x4bda89(0x229)]=_0x4bda89(0x1e1),setTimeout(()=>{const _0x2783d2=_0x4bda89;location[_0x2783d2(0x1e8)]();},0x320)):ptrElement[_0x4bda89(0x227)]['top']=_0x4bda89(0x3dd);});function listenForNotifications(){const _0x47acca=_0x8f774e;onSnapshot(doc(db,_0x47acca(0x396),_0x47acca(0x236)),_0x1e9adf=>{const _0x2ecabc=_0x47acca;if(_0x1e9adf[_0x2ecabc(0x2fb)]()){const _0x169abf=_0x1e9adf[_0x2ecabc(0x39d)](),_0x1bb88a=localStorage[_0x2ecabc(0x328)](_0x2ecabc(0x211));_0x169abf['id']&&_0x169abf['id']!==_0x1bb88a&&_0x169abf[_0x2ecabc(0x2dc)]&&(showNotification(_0x169abf[_0x2ecabc(0x2dc)]),localStorage[_0x2ecabc(0x1ea)](_0x2ecabc(0x211),_0x169abf['id']));}});}window[_0x8f774e(0x258)]=_0xb9ab69=>{const _0x9ac6be=_0x8f774e,_0x446080=document[_0x9ac6be(0x2d8)]('notification-popup'),_0x1b43c1=document[_0x9ac6be(0x2d8)](_0x9ac6be(0x2e3));_0x446080&&_0x1b43c1&&(_0x1b43c1[_0x9ac6be(0x295)]=_0xb9ab69,_0x446080[_0x9ac6be(0x21d)][_0x9ac6be(0x249)](_0x9ac6be(0x248)),setTimeout(()=>{const _0x367621=_0x9ac6be;_0x446080[_0x367621(0x21d)][_0x367621(0x38e)](_0x367621(0x248));},0x1f40));},window[_0x8f774e(0x37a)]=()=>{const _0x11a369=_0x8f774e,_0x135c00=document['getElementById'](_0x11a369(0x23e));if(_0x135c00)_0x135c00[_0x11a369(0x21d)][_0x11a369(0x38e)](_0x11a369(0x248));},window[_0x8f774e(0x291)]=async()=>{const _0x549a7d=_0x8f774e,_0x32f4e0=document['getElementById'](_0x549a7d(0x26c))[_0x549a7d(0x23c)];if(!_0x32f4e0)return;await setDoc(doc(db,'settings','notifications'),{'text':_0x32f4e0,'id':Date['now']()['toString'](),'createdAt':serverTimestamp()}),alert(_0x549a7d(0x26f)),document[_0x549a7d(0x2d8)](_0x549a7d(0x26c))['value']='';};function _0x2db1(_0x18bc34,_0x11e56c){_0x18bc34=_0x18bc34-0x1d1;const _0x1db201=_0x1db2();let _0x2db161=_0x1db201[_0x18bc34];return _0x2db161;}let notifUnsub=null;function listenToMyNotifications(_0x553203){const _0x2c7711=_0x8f774e;if(notifUnsub)notifUnsub();const _0x5c8646=query(collection(db,'notifications'),where(_0x2c7711(0x314),'==',_0x553203),limit(0x32));notifUnsub=onSnapshot(_0x5c8646,_0x50fba2=>{const _0x21c455=_0x2c7711,_0x4c6027=document[_0x21c455(0x2d8)](_0x21c455(0x207)),_0x5af496=document['getElementById'](_0x21c455(0x2e0));let _0x561388=0x0,_0x36d516='',_0x4edd8a=[];if(_0x50fba2['empty']){_0x4c6027['innerHTML']=_0x21c455(0x287),_0x5af496[_0x21c455(0x227)]['display']='none';return;}_0x50fba2[_0x21c455(0x214)](_0x280210=>{const _0x32e1e4=_0x21c455;_0x4edd8a[_0x32e1e4(0x20d)]({'id':_0x280210['id'],..._0x280210[_0x32e1e4(0x39d)]()});}),_0x4edd8a['sort']((_0xf92258,_0x301d1a)=>(_0x301d1a[_0x21c455(0x293)]?.[_0x21c455(0x1f7)]||0x0)-(_0xf92258[_0x21c455(0x293)]?.[_0x21c455(0x1f7)]||0x0)),_0x4edd8a['forEach'](_0x3fe387=>{const _0x49bead=_0x21c455;if(!_0x3fe387[_0x49bead(0x380)])_0x561388++;_0x36d516+=_0x49bead(0x388)+(_0x3fe387['isRead']?'':_0x49bead(0x268))+_0x49bead(0x3aa)+_0x3fe387['id']+_0x49bead(0x3bc)+_0x3fe387['collectionRef']+_0x49bead(0x3bc)+_0x3fe387[_0x49bead(0x23b)]+_0x49bead(0x272)+(_0x3fe387['senderAvatar']||_0x49bead(0x37f))+_0x49bead(0x224)+_0x3fe387[_0x49bead(0x2cc)]+_0x49bead(0x33b)+(_0x3fe387[_0x49bead(0x293)]?new Date(_0x3fe387[_0x49bead(0x293)][_0x49bead(0x1f7)]*0x3e8)[_0x49bead(0x3dc)](_0x49bead(0x353)):_0x49bead(0x304))+'</span></div></div>';}),_0x4c6027['innerHTML']=_0x36d516,_0x5af496[_0x21c455(0x227)]['display']=_0x561388>0x0?_0x21c455(0x225):_0x21c455(0x2cf);});}async function pushNotification(_0x226fad,_0x5ba3ab,_0x27544c,_0x3f71c0,_0x59306c){const _0x3de4db=_0x8f774e;if(!currentUser||_0x226fad===currentUser[_0x3de4db(0x27b)])return;try{await addDoc(collection(db,_0x3de4db(0x236)),{'recipientUid':_0x226fad,'senderName':currentUser[_0x3de4db(0x39b)],'senderAvatar':currentUser[_0x3de4db(0x311)],'type':_0x5ba3ab,'message':_0x27544c,'link':_0x3f71c0,'collectionRef':_0x59306c,'isRead':![],'createdAt':serverTimestamp()});}catch(_0x13bf81){console['error'](_0x3de4db(0x3c3),_0x13bf81);}}window[_0x8f774e(0x3c7)]=async(_0x28b812,_0x59ef55,_0xa1a957)=>{const _0x48eaaf=_0x8f774e;await updateDoc(doc(db,_0x48eaaf(0x236),_0x28b812),{'isRead':!![]});if(_0x59ef55&&_0xa1a957&&_0x59ef55!==_0x48eaaf(0x34f))window[_0x48eaaf(0x240)](_0x59ef55,_0xa1a957);document[_0x48eaaf(0x2d8)](_0x48eaaf(0x3c4))['classList']['remove'](_0x48eaaf(0x34c));},window[_0x8f774e(0x282)]=()=>{const _0x4aefd9=_0x8f774e;document[_0x4aefd9(0x2d8)](_0x4aefd9(0x3c4))[_0x4aefd9(0x21d)][_0x4aefd9(0x2a0)](_0x4aefd9(0x34c));},window[_0x8f774e(0x2b2)]=async()=>{const _0x57d9ec=_0x8f774e,_0x3fe5aa=document[_0x57d9ec(0x320)]('.notif-item.unread');_0x3fe5aa['forEach'](_0x526460=>_0x526460[_0x57d9ec(0x21d)]['remove']('unread')),document[_0x57d9ec(0x2d8)](_0x57d9ec(0x2e0))[_0x57d9ec(0x227)][_0x57d9ec(0x263)]=_0x57d9ec(0x2cf);};async function callGeminiAPI(_0x5d1e2c,_0x1c1f95=null){const _0x7791ad=_0x8f774e;let _0x154d05=[];_0x1c1f95?_0x154d05=[{'parts':[{'text':_0x5d1e2c},{'inline_data':{'mime_type':_0x7791ad(0x2fc),'data':_0x1c1f95}}]}]:(chatHistory[_0x7791ad(0x20d)]({'role':'user','parts':[{'text':_0x5d1e2c}]}),_0x154d05=chatHistory);for(let _0x496eea=0x0;_0x496eea<aiKeys[_0x7791ad(0x1e2)];_0x496eea++){const _0x4f55cb=aiKeys[_0x496eea];try{const _0x388e65=_0x7791ad(0x1fa)+_0x4f55cb[_0x7791ad(0x1da)],_0x411799=await fetch(_0x388e65,{'method':_0x7791ad(0x39f),'headers':{'Content-Type':_0x7791ad(0x305)},'body':JSON['stringify']({'contents':_0x154d05})});if(!_0x411799['ok'])throw new Error(_0x7791ad(0x3ca)+_0x411799[_0x7791ad(0x2bb)]);const _0x441821=await _0x411799[_0x7791ad(0x2b6)](),_0x2c7a06=_0x441821['candidates']?.[0x0]?.['content']?.[_0x7791ad(0x266)]?.[0x0]?.[_0x7791ad(0x2dc)]||'AI\x20kh√¥ng\x20ph·∫£n\x20h·ªìi.';if(!_0x1c1f95){chatHistory['push']({'role':_0x7791ad(0x2ef),'parts':[{'text':_0x2c7a06}]});if(chatHistory[_0x7791ad(0x1e2)]>0x14)chatHistory=chatHistory[_0x7791ad(0x31d)](chatHistory[_0x7791ad(0x1e2)]-0x14);}return _0x2c7a06;}catch(_0x25b651){if(_0x496eea===aiKeys[_0x7791ad(0x1e2)]-0x1)return _0x7791ad(0x2fa);}}}window[_0x8f774e(0x2fd)]=async()=>{const _0x554401=_0x8f774e,_0x4f67db=document[_0x554401(0x2f2)]('.btn-ai'),_0x1b212=_0x4f67db['innerText'];_0x4f67db[_0x554401(0x295)]=_0x554401(0x285);try{const _0x2650a1=await callGeminiAPI('Ch√†o\x20Green\x20Bot!');alert('‚úÖ\x20K·∫øt\x20n·ªëi\x20AI\x20th√†nh\x20c√¥ng!\x0aTr·∫£\x20l·ªùi:\x20'+_0x2650a1);}catch(_0x1c50c6){alert('‚ùå\x20L·ªói:\x20'+_0x1c50c6[_0x554401(0x2cc)]);}_0x4f67db[_0x554401(0x295)]=_0x1b212;},window[_0x8f774e(0x360)]=async()=>{const _0xe5150c=_0x8f774e,_0x295561=document[_0xe5150c(0x2d8)]('new-key-name')['value'][_0xe5150c(0x3d2)](),_0x2c4adc=document[_0xe5150c(0x2d8)](_0xe5150c(0x32a))[_0xe5150c(0x23c)][_0xe5150c(0x3d2)]();if(!_0x295561||!_0x2c4adc)return alert(_0xe5150c(0x33f));await updateDoc(doc(db,_0xe5150c(0x396),_0xe5150c(0x3ce)),{'aiKeys':arrayUnion({'name':_0x295561,'val':_0x2c4adc})}),document[_0xe5150c(0x2d8)](_0xe5150c(0x315))[_0xe5150c(0x23c)]='',document['getElementById'](_0xe5150c(0x32a))[_0xe5150c(0x23c)]='',alert(_0xe5150c(0x362));},window[_0x8f774e(0x349)]=async(_0x308008,_0x5e18c1)=>{const _0x18f0a7=_0x8f774e;confirm('X√≥a\x20Key\x20\x22'+_0x308008+'\x22?')&&await updateDoc(doc(db,_0x18f0a7(0x396),_0x18f0a7(0x3ce)),{'aiKeys':arrayRemove({'name':_0x308008,'val':_0x5e18c1})});},window[_0x8f774e(0x273)]=()=>{const _0x16f5a7=_0x8f774e,_0x22535e=document[_0x16f5a7(0x2d8)](_0x16f5a7(0x2ac));_0x22535e[_0x16f5a7(0x227)]['display']=_0x22535e[_0x16f5a7(0x227)][_0x16f5a7(0x263)]===_0x16f5a7(0x2c0)?_0x16f5a7(0x2cf):'flex';},window[_0x8f774e(0x2cd)]=_0x1d2a11=>{const _0x42073e=_0x8f774e;document[_0x42073e(0x2d8)](_0x42073e(0x37d))[_0x42073e(0x23c)]=_0x1d2a11,window['sendMessageToAI'](new Event(_0x42073e(0x242)));},window[_0x8f774e(0x366)]=async _0x436b54=>{const _0x2a474f=_0x8f774e;_0x436b54[_0x2a474f(0x2c5)]();const _0x7e3152=document[_0x2a474f(0x2d8)](_0x2a474f(0x37d)),_0x371b13=_0x7e3152[_0x2a474f(0x23c)];if(!_0x371b13)return;const _0x12eb81=document[_0x2a474f(0x2d8)](_0x2a474f(0x312));_0x12eb81[_0x2a474f(0x229)]+=_0x2a474f(0x1dc)+_0x371b13+_0x2a474f(0x2b1),_0x7e3152[_0x2a474f(0x23c)]='',_0x12eb81[_0x2a474f(0x265)]=_0x12eb81[_0x2a474f(0x339)];const _0x424144=_0x2a474f(0x3c8)+Date['now']();_0x12eb81['innerHTML']+=_0x2a474f(0x25e)+_0x424144+_0x2a474f(0x3a3),_0x12eb81[_0x2a474f(0x265)]=_0x12eb81['scrollHeight'];try{const _0x58037f=await callGeminiAPI(_0x371b13);document['getElementById'](_0x424144)[_0x2a474f(0x295)]=_0x58037f;}catch(_0x3d083a){document[_0x2a474f(0x2d8)](_0x424144)['innerHTML']='<span\x20style=\x22color:red\x22>L·ªói:\x20'+_0x3d083a['message']+_0x2a474f(0x1d4);}_0x12eb81[_0x2a474f(0x265)]=_0x12eb81[_0x2a474f(0x339)];};function fileToBase64(_0x2916b9){return new Promise((_0x4509e7,_0x3e6dd5)=>{const _0x3eabb4=_0x2db1,_0x4fe63d=new FileReader();_0x4fe63d['readAsDataURL'](_0x2916b9),_0x4fe63d[_0x3eabb4(0x302)]=()=>_0x4509e7(_0x4fe63d[_0x3eabb4(0x24f)][_0x3eabb4(0x3d9)](',')[0x1]),_0x4fe63d[_0x3eabb4(0x370)]=_0x27636a=>_0x3e6dd5(_0x27636a);});}function getYoutubeID(_0x26b40f){const _0x2a1f6e=_0x8f774e,_0x154b20=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,_0x5be1cc=_0x26b40f[_0x2a1f6e(0x218)](_0x154b20);return _0x5be1cc&&_0x5be1cc[0x2][_0x2a1f6e(0x1e2)]===0xb?_0x5be1cc[0x2]:_0x26b40f;}const tag=document[_0x8f774e(0x2a7)](_0x8f774e(0x20e));tag['src']=_0x8f774e(0x2c3);var firstScriptTag=document['getElementsByTagName']('script')[0x0];firstScriptTag[_0x8f774e(0x2f8)]['insertBefore'](tag,firstScriptTag);let player;window[_0x8f774e(0x2d0)]=function(){const _0x1a45f2=_0x8f774e;player=new YT[(_0x1a45f2(0x250))](_0x1a45f2(0x228),{'height':'0','width':'0','videoId':musicId,'events':{'onStateChange':onPlayerStateChange}});};function onPlayerStateChange(_0x175819){const _0x1fab2f=_0x8f774e,_0x42b1f6=document[_0x1fab2f(0x2d8)](_0x1fab2f(0x1f6));_0x175819['data']==YT[_0x1fab2f(0x357)][_0x1fab2f(0x2af)]?(_0x42b1f6[_0x1fab2f(0x21d)][_0x1fab2f(0x249)](_0x1fab2f(0x3d1)),_0x42b1f6['style']['color']=_0x1fab2f(0x37c)):(_0x42b1f6[_0x1fab2f(0x21d)][_0x1fab2f(0x38e)](_0x1fab2f(0x3d1)),_0x42b1f6[_0x1fab2f(0x227)][_0x1fab2f(0x1ff)]=_0x1fab2f(0x1d1));}window['toggleMusic']=()=>{const _0x5f40eb=_0x8f774e;try{if(player&&player[_0x5f40eb(0x31c)]()==YT['PlayerState'][_0x5f40eb(0x2af)])player[_0x5f40eb(0x22a)]();else{if(player)player[_0x5f40eb(0x3c0)]();}}catch(_0x1bb579){}},window[_0x8f774e(0x2b5)]=async()=>{const _0x15645e=_0x8f774e,_0x10df91=document[_0x15645e(0x2d8)](_0x15645e(0x1ec))[_0x15645e(0x23c)];let _0x5086e7=document[_0x15645e(0x2d8)](_0x15645e(0x2d5))[_0x15645e(0x23c)];if(!_0x10df91||!_0x5086e7)return alert(_0x15645e(0x3d3));const _0x2ac7ce=getYoutubeID(_0x5086e7);await updateDoc(doc(db,_0x15645e(0x396),'config'),{'playlist':arrayUnion({'name':_0x10df91,'id':_0x2ac7ce})}),alert(_0x15645e(0x3d5));},window[_0x8f774e(0x31f)]=async _0x58e8d7=>{const _0x2b101e=_0x8f774e;await updateDoc(doc(db,_0x2b101e(0x396),_0x2b101e(0x3ce)),{'musicId':_0x58e8d7}),alert(_0x2b101e(0x27a));},window[_0x8f774e(0x277)]=async(_0x415a6b,_0x2cb0c8)=>{const _0x50867d=_0x8f774e;if(confirm('X√≥a\x20b√†i\x20n√†y?'))await updateDoc(doc(db,_0x50867d(0x396),_0x50867d(0x3ce)),{'playlist':arrayRemove({'name':_0x415a6b,'id':_0x2cb0c8})});},onSnapshot(doc(db,'settings','config'),_0x411d5c=>{const _0x59bd0a=_0x8f774e;if(_0x411d5c[_0x59bd0a(0x2fb)]()){const _0x199611=_0x411d5c[_0x59bd0a(0x39d)]();if(_0x199611[_0x59bd0a(0x1e0)]&&_0x199611['aiKeys']['length']>0x0){aiKeys=_0x199611[_0x59bd0a(0x1e0)];const _0x13cdc1=document[_0x59bd0a(0x2d8)](_0x59bd0a(0x269));_0x13cdc1&&(_0x13cdc1[_0x59bd0a(0x229)]='',aiKeys[_0x59bd0a(0x214)](_0x19bc14=>{const _0xc830d3=_0x59bd0a;_0x13cdc1[_0xc830d3(0x229)]+='<div\x20class=\x22key-item\x22><span\x20class=\x22key-name\x22>'+_0x19bc14[_0xc830d3(0x300)]+'</span><span\x20class=\x22key-val\x22>******</span><button\x20class=\x22btn\x20btn-sm\x20btn-danger\x22\x20onclick=\x22removeAIKey(\x27'+_0x19bc14[_0xc830d3(0x300)]+_0xc830d3(0x3bc)+_0x19bc14[_0xc830d3(0x1da)]+_0xc830d3(0x2ff);}));}_0x199611['googleSheetUrl']&&(googleSheetUrl=_0x199611[_0x59bd0a(0x34a)]);if(_0x199611[_0x59bd0a(0x1e6)]&&_0x199611['musicId']!==musicId){musicId=_0x199611[_0x59bd0a(0x1e6)];try{if(player)player[_0x59bd0a(0x1f0)](musicId);}catch(_0x498de9){}}const _0x275a38=document['getElementById'](_0x59bd0a(0x264));_0x275a38&&_0x199611[_0x59bd0a(0x1de)]&&(_0x275a38[_0x59bd0a(0x229)]='',_0x199611[_0x59bd0a(0x1de)]['forEach'](_0x526e0f=>{const _0x4d9b68=_0x59bd0a,_0x232097=_0x526e0f['id']===_0x199611[_0x4d9b68(0x1e6)]?_0x4d9b68(0x324):'';_0x275a38[_0x4d9b68(0x229)]+=_0x4d9b68(0x394)+_0x232097+_0x4d9b68(0x2bf)+_0x526e0f[_0x4d9b68(0x300)]+_0x4d9b68(0x384)+_0x526e0f['id']+'\x27)\x22>‚ñ∂</button>\x20<button\x20class=\x22btn\x20btn-sm\x20btn-danger\x22\x20onclick=\x22deleteSong(\x27'+_0x526e0f[_0x4d9b68(0x300)]+_0x4d9b68(0x25b)+_0x526e0f['id']+_0x4d9b68(0x20f);}));const _0x1a2e2a=document[_0x59bd0a(0x2d8)](_0x59bd0a(0x2b7));if(_0x199611[_0x59bd0a(0x2f0)]&&(!currentUser||!isAdmin(currentUser[_0x59bd0a(0x386)])))_0x1a2e2a[_0x59bd0a(0x227)]['display']=_0x59bd0a(0x2c0);else _0x1a2e2a[_0x59bd0a(0x227)][_0x59bd0a(0x263)]='none';applyLock(_0x59bd0a(0x3a1),_0x199611['locks']?.['home']),applyLock(_0x59bd0a(0x1e7),_0x199611[_0x59bd0a(0x341)]?.[_0x59bd0a(0x1e7)]),applyLock(_0x59bd0a(0x262),_0x199611[_0x59bd0a(0x341)]?.[_0x59bd0a(0x262)]),applyLock('activities',_0x199611['locks']?.[_0x59bd0a(0x348)]),applyLock('guide',_0x199611[_0x59bd0a(0x341)]?.[_0x59bd0a(0x369)]),applyLock(_0x59bd0a(0x23f),_0x199611[_0x59bd0a(0x341)]?.[_0x59bd0a(0x23f)]),handleTimer('timer-gallery',_0x59bd0a(0x2cb),_0x199611[_0x59bd0a(0x283)]?.[_0x59bd0a(0x3a8)]),handleTimer('timer-contest',_0x59bd0a(0x33e),_0x199611['deadlines']?.['contest']),currentUser&&isAdmin(currentUser['email'])&&(document[_0x59bd0a(0x2d8)](_0x59bd0a(0x383))[_0x59bd0a(0x31e)]=_0x199611[_0x59bd0a(0x2f0)],document[_0x59bd0a(0x2d8)](_0x59bd0a(0x257))[_0x59bd0a(0x31e)]=_0x199611['locks']?.[_0x59bd0a(0x3a1)],document['getElementById'](_0x59bd0a(0x321))[_0x59bd0a(0x31e)]=_0x199611[_0x59bd0a(0x341)]?.[_0x59bd0a(0x1e7)],document['getElementById'](_0x59bd0a(0x35d))[_0x59bd0a(0x31e)]=_0x199611[_0x59bd0a(0x341)]?.[_0x59bd0a(0x262)],document[_0x59bd0a(0x2d8)](_0x59bd0a(0x217))['checked']=_0x199611[_0x59bd0a(0x341)]?.[_0x59bd0a(0x348)],document[_0x59bd0a(0x2d8)](_0x59bd0a(0x35e))[_0x59bd0a(0x31e)]=_0x199611[_0x59bd0a(0x341)]?.['guide'],document[_0x59bd0a(0x2d8)]('lock-archive')[_0x59bd0a(0x31e)]=_0x199611[_0x59bd0a(0x341)]?.[_0x59bd0a(0x23f)],document['getElementById'](_0x59bd0a(0x27e))['value']=_0x199611[_0x59bd0a(0x283)]?.[_0x59bd0a(0x3a8)]||'',document[_0x59bd0a(0x2d8)](_0x59bd0a(0x2ea))[_0x59bd0a(0x23c)]=_0x199611[_0x59bd0a(0x283)]?.[_0x59bd0a(0x262)]||'',_0x199611[_0x59bd0a(0x34a)]&&(document[_0x59bd0a(0x2d8)](_0x59bd0a(0x364))[_0x59bd0a(0x23c)]=_0x199611[_0x59bd0a(0x34a)]));}});function applyLock(_0x1b0f6d,_0x5195c4){const _0x7722d2=_0x8f774e,_0x3ee2c3=document[_0x7722d2(0x2d8)]('locked-'+_0x1b0f6d),_0x4073b6=document[_0x7722d2(0x2d8)](_0x7722d2(0x3df)+_0x1b0f6d);if(_0x5195c4&&(!currentUser||!isAdmin(currentUser['email']))){if(_0x3ee2c3)_0x3ee2c3[_0x7722d2(0x227)][_0x7722d2(0x263)]='block';if(_0x4073b6)_0x4073b6[_0x7722d2(0x227)][_0x7722d2(0x263)]='none';}else{if(_0x3ee2c3)_0x3ee2c3[_0x7722d2(0x227)][_0x7722d2(0x263)]=_0x7722d2(0x2cf);if(_0x4073b6)_0x4073b6[_0x7722d2(0x227)]['display']='block';}}let intervals={};function handleTimer(_0x14dde3,_0x23f822,_0x396c6e){const _0x41cdfb=_0x8f774e;if(!_0x396c6e){document[_0x41cdfb(0x2d8)](_0x23f822)[_0x41cdfb(0x227)][_0x41cdfb(0x263)]=_0x41cdfb(0x2cf);return;}document['getElementById'](_0x23f822)[_0x41cdfb(0x227)][_0x41cdfb(0x263)]=_0x41cdfb(0x225);if(intervals[_0x14dde3])clearInterval(intervals[_0x14dde3]);const _0x5df640=new Date(_0x396c6e)[_0x41cdfb(0x32f)]();intervals[_0x14dde3]=setInterval(()=>{const _0x340524=_0x41cdfb,_0x5a8439=new Date()[_0x340524(0x32f)](),_0x42779b=_0x5df640-_0x5a8439;if(_0x42779b<0x0)clearInterval(intervals[_0x14dde3]),document['getElementById'](_0x14dde3)[_0x340524(0x229)]=_0x340524(0x39c);else{const _0x3cca09=Math[_0x340524(0x1ee)](_0x42779b/(0x3e8*0x3c*0x3c*0x18)),_0x25cb4d=Math[_0x340524(0x1ee)](_0x42779b%(0x3e8*0x3c*0x3c*0x18)/(0x3e8*0x3c*0x3c)),_0x4a1922=Math[_0x340524(0x1ee)](_0x42779b%(0x3e8*0x3c*0x3c)/(0x3e8*0x3c));document['getElementById'](_0x14dde3)['innerHTML']=_0x3cca09+'d\x20'+_0x25cb4d+'h\x20'+_0x4a1922+'p';}},0x3e8);}window[_0x8f774e(0x22c)]=async()=>{const _0x346627=_0x8f774e;await signOut(auth),alert('ƒê√£\x20ƒëƒÉng\x20xu·∫•t'),location[_0x346627(0x1e8)]();},window['checkAdminLogin']=()=>signInWithPopup(auth,provider);async function syncToGoogleSheet(_0x4f0d5e){const _0x4ba91e=_0x8f774e;if(!googleSheetUrl)return;try{const _0x103a39={'displayName':_0x4f0d5e[_0x4ba91e(0x39b)]||'Ch∆∞a\x20ƒë·∫∑t\x20t√™n','email':_0x4f0d5e[_0x4ba91e(0x386)],'customID':_0x4f0d5e[_0x4ba91e(0x3bb)]||'','createdAt':_0x4f0d5e[_0x4ba91e(0x293)]?new Date(_0x4f0d5e[_0x4ba91e(0x293)][_0x4ba91e(0x1f7)]*0x3e8)['toLocaleString']('vi-VN'):new Date()[_0x4ba91e(0x3dc)](_0x4ba91e(0x353)),'classInfo':_0x4f0d5e['class']?_0x4ba91e(0x210)+_0x4f0d5e[_0x4ba91e(0x253)]:_0x4ba91e(0x2a6),'lastActive':new Date()['toLocaleString'](_0x4ba91e(0x353)),'loginCount':_0x4f0d5e['loginCount']||0x1,'uid':_0x4f0d5e[_0x4ba91e(0x27b)]};await fetch(googleSheetUrl,{'method':'POST','mode':_0x4ba91e(0x2ba),'headers':{'Content-Type':_0x4ba91e(0x305)},'body':JSON[_0x4ba91e(0x36f)](_0x103a39)}),console['log'](_0x4ba91e(0x2f4));}catch(_0x4a8300){console['error']('Sync\x20Error:',_0x4a8300);}}onAuthStateChanged(auth,async _0x40a386=>{const _0x24af8d=_0x8f774e;renderGrid(_0x24af8d(0x3a8),_0x24af8d(0x234),{'id':_0x24af8d(0x387)},{'id':'rank-gallery-class'}),renderGrid('contest','contest-grid',{'id':_0x24af8d(0x222)},{'id':'rank-contest-class'}),listenForNotifications();if(_0x40a386){const _0x19449a=doc(db,_0x24af8d(0x1db),_0x40a386[_0x24af8d(0x27b)]),_0x4fa144=await getDoc(_0x19449a);let _0x23f171;if(_0x4fa144['exists']()){const _0x534718=_0x4fa144['data']();if(_0x534718[_0x24af8d(0x393)]){alert('B·∫°n\x20ƒë√£\x20b·ªã\x20kh√≥a!'),signOut(auth);return;}_0x23f171={..._0x534718,'loginCount':(_0x534718[_0x24af8d(0x33c)]||0x0)+0x1},await updateDoc(_0x19449a,{'lastActive':serverTimestamp(),'loginCount':increment(0x1)});}else _0x23f171={'uid':_0x40a386[_0x24af8d(0x27b)],'email':_0x40a386[_0x24af8d(0x386)],'displayName':isAdmin(_0x40a386['email'])?_0x24af8d(0x1fe):_0x40a386[_0x24af8d(0x39b)],'photoURL':_0x40a386[_0x24af8d(0x311)],'role':isAdmin(_0x40a386[_0x24af8d(0x386)])?_0x24af8d(0x2e4):_0x24af8d(0x208),'status':_0x24af8d(0x34c),'class':'','customID':'@'+_0x40a386[_0x24af8d(0x27b)]['slice'](0x0,0x5),'createdAt':serverTimestamp(),'lastActive':serverTimestamp(),'loginCount':0x1},await setDoc(_0x19449a,_0x23f171);currentUser=_0x23f171,syncToGoogleSheet(currentUser),listenToMyNotifications(_0x40a386[_0x24af8d(0x27b)]),handleRoute(),document[_0x24af8d(0x2d8)](_0x24af8d(0x205))['style'][_0x24af8d(0x263)]='block',document[_0x24af8d(0x2d8)]('profile-out')[_0x24af8d(0x227)][_0x24af8d(0x263)]=_0x24af8d(0x2cf),document[_0x24af8d(0x2d8)](_0x24af8d(0x2bc))[_0x24af8d(0x227)][_0x24af8d(0x263)]=_0x24af8d(0x2cf),document[_0x24af8d(0x2d8)](_0x24af8d(0x21c))[_0x24af8d(0x350)]=currentUser[_0x24af8d(0x311)],document[_0x24af8d(0x2d8)](_0x24af8d(0x3d6))['innerHTML']=currentUser[_0x24af8d(0x29c)]===_0x24af8d(0x2e4)||isAdmin(currentUser['email'])?'<span\x20style=\x22color:red;font-weight:bold\x22>Admin_xinhxinh\x20‚úÖ</span>':currentUser['displayName'],document[_0x24af8d(0x2d8)](_0x24af8d(0x397))[_0x24af8d(0x295)]=currentUser['customID']||_0x24af8d(0x20a),document[_0x24af8d(0x2d8)](_0x24af8d(0x2d2))[_0x24af8d(0x295)]=currentUser[_0x24af8d(0x386)],document[_0x24af8d(0x2d8)]('edit-name')[_0x24af8d(0x23c)]=currentUser[_0x24af8d(0x39b)],document[_0x24af8d(0x2d8)](_0x24af8d(0x281))['value']=currentUser[_0x24af8d(0x3bb)]||'',document[_0x24af8d(0x2d8)](_0x24af8d(0x3ad))[_0x24af8d(0x23c)]=currentUser[_0x24af8d(0x253)]||'',document['getElementById'](_0x24af8d(0x32d))[_0x24af8d(0x23c)]=currentUser[_0x24af8d(0x352)]||'',isAdmin(currentUser[_0x24af8d(0x386)])&&(document['getElementById'](_0x24af8d(0x3c2))[_0x24af8d(0x227)][_0x24af8d(0x263)]=_0x24af8d(0x225),document[_0x24af8d(0x2d8)]('mob-admin')[_0x24af8d(0x227)][_0x24af8d(0x263)]=_0x24af8d(0x2c0),document[_0x24af8d(0x2d8)](_0x24af8d(0x2b7))[_0x24af8d(0x227)][_0x24af8d(0x263)]=_0x24af8d(0x2cf));}else{currentUser=null;if(notifUnsub)notifUnsub();document[_0x24af8d(0x2d8)](_0x24af8d(0x205))['style']['display']='none',document['getElementById'](_0x24af8d(0x3d0))['style'][_0x24af8d(0x263)]='block',document['getElementById'](_0x24af8d(0x2bc))['style'][_0x24af8d(0x263)]=_0x24af8d(0x225),document[_0x24af8d(0x2d8)]('menu-pc-admin')[_0x24af8d(0x227)][_0x24af8d(0x263)]='none',document[_0x24af8d(0x2d8)](_0x24af8d(0x301))[_0x24af8d(0x227)][_0x24af8d(0x263)]='none';}}),window['changeAvatar']=async _0x5f28eb=>{const _0x16189d=_0x8f774e,_0x5c6baf=_0x5f28eb['files'][0x0];if(!_0x5c6baf)return;const _0x1d8571=new FormData();_0x1d8571[_0x16189d(0x34b)]('file',_0x5c6baf),_0x1d8571[_0x16189d(0x34b)](_0x16189d(0x31a),UPLOAD_PRESET),document[_0x16189d(0x2d8)](_0x16189d(0x376))['style'][_0x16189d(0x263)]=_0x16189d(0x2c0);try{const _0x17e2ca=await fetch(_0x16189d(0x261)+CLOUD_NAME+_0x16189d(0x2b0),{'method':_0x16189d(0x39f),'body':_0x1d8571}),_0x240548=await _0x17e2ca[_0x16189d(0x2b6)]();_0x240548[_0x16189d(0x279)]&&(await updateDoc(doc(db,_0x16189d(0x1db),currentUser[_0x16189d(0x27b)]),{'photoURL':_0x240548[_0x16189d(0x279)]}),alert(_0x16189d(0x2e1)),location['reload']());}catch(_0xb9a44d){alert(_0x16189d(0x313));}document['getElementById']('upload-overlay')[_0x16189d(0x227)]['display']=_0x16189d(0x2cf);},window[_0x8f774e(0x1f9)]=_0x23c6e9=>{const _0x289ae2=_0x8f774e;if(!currentUser){alert(_0x289ae2(0x2ab));return;}if(!currentUser[_0x289ae2(0x253)]){alert('Vui\x20l√≤ng\x20c·∫≠p\x20nh·∫≠t\x20L·ªõp!'),showPage(_0x289ae2(0x2db));return;}window['uploadMode']=_0x23c6e9,currentCollection=_0x23c6e9==='trash'?'gallery':_0x23c6e9,document[_0x289ae2(0x2d8)]('file-input')[_0x289ae2(0x3b2)]();},window[_0x8f774e(0x30c)]=async _0x2c7420=>{const _0x13b99b=_0x8f774e,_0x444886=_0x2c7420[_0x13b99b(0x3d7)][0x0];if(!_0x444886)return;const _0x57d6f3=window[_0x13b99b(0x1ed)]===_0x13b99b(0x1fb);let _0x40c568=_0x57d6f3?'ƒê√¢y\x20l√†\x20lo·∫°i\x20r√°c\x20g√¨?\x20N√≥\x20thu·ªôc\x20nh√≥m\x20(H·ªØu\x20c∆°,\x20T√°i\x20ch·∫ø,\x20hay\x20R√°c\x20th·∫£i\x20c√≤n\x20l·∫°i)?\x20H√£y\x20h∆∞·ªõng\x20d·∫´n\x20c√°ch\x20v·ª©t\x20ng·∫Øn\x20g·ªçn.':'ƒê√≥ng\x20vai\x20m·ªôt\x20h·ªçc\x20sinh\x20l·ªõp\x20A2K41\x20ƒëƒÉng\x20·∫£nh\x20l√™n\x20m·∫°ng\x20x√£\x20h·ªôi\x20c·ªßa\x20l·ªõp.\x20H√£y\x20vi·∫øt\x203\x20d√≤ng\x20tr·∫°ng\x20th√°i\x20(caption)\x20ng·∫Øn\x20g·ªçn,\x20t·ª±\x20nhi√™n,\x20x∆∞ng\x20h√¥\x20\x27m√¨nh\x27\x20ho·∫∑c\x20\x27l·ªõp\x20t·ªõ\x27\x20v·ªÅ\x20b·ª©c\x20·∫£nh\x20n√†y.\x20G·ª£i\x20√Ω\x201:\x20Vui\x20v·∫ª.\x20G·ª£i\x20√Ω\x202:\x20√ù\x20nghƒ©a.\x20G·ª£i\x20√Ω\x203:\x20H√†i\x20h∆∞·ªõc.\x20M·ªói\x20g·ª£i\x20√Ω\x201\x20d√≤ng\x20g·∫°ch\x20ƒë·∫ßu\x20d√≤ng.',_0x52ebef='';if(!_0x57d6f3){const _0x17d426=prompt('Nh·∫≠p\x20m√¥\x20t·∫£\x20cho\x20·∫£nh\x20(Ho·∫∑c\x20ƒë·ªÉ\x20tr·ªëng\x20ƒë·ªÉ\x20AI\x20g·ª£i\x20√Ω\x20caption):');if(_0x17d426===null)return;_0x52ebef=_0x17d426;}document[_0x13b99b(0x2d8)](_0x13b99b(0x24a))[_0x13b99b(0x295)]=_0x57d6f3?_0x13b99b(0x1d6):_0x13b99b(0x310),document[_0x13b99b(0x2d8)]('upload-overlay')[_0x13b99b(0x227)][_0x13b99b(0x263)]='flex';try{const _0x14ecca=new FormData();_0x14ecca[_0x13b99b(0x34b)](_0x13b99b(0x2f1),_0x444886),_0x14ecca['append'](_0x13b99b(0x31a),UPLOAD_PRESET);const _0x4aa697=await fetch('https://api.cloudinary.com/v1_1/'+CLOUD_NAME+_0x13b99b(0x2b0),{'method':'POST','body':_0x14ecca}),_0x2b7ca2=await _0x4aa697['json']();if(_0x2b7ca2[_0x13b99b(0x279)]){if(_0x57d6f3||!_0x52ebef)try{const _0x4ae64e=await fileToBase64(_0x444886),_0x5022e5=await callGeminiAPI(_0x40c568,_0x4ae64e);_0x57d6f3?(alert('ü§ñ\x20AI\x20K·∫øt\x20lu·∫≠n:\x0a'+_0x5022e5),_0x52ebef=_0x5022e5):_0x52ebef=_0x5022e5;}catch(_0x4f1862){console[_0x13b99b(0x2a3)](_0x4f1862);if(_0x57d6f3)alert(_0x13b99b(0x2ce));}await addDoc(collection(db,currentCollection),{'url':_0x2b7ca2[_0x13b99b(0x279)],'desc':_0x52ebef||'Kh√¥ng\x20c√≥\x20m√¥\x20t·∫£','uid':currentUser[_0x13b99b(0x27b)],'authorName':currentUser[_0x13b99b(0x39b)],'authorID':currentUser[_0x13b99b(0x3bb)]||_0x13b99b(0x220),'authorAvatar':currentUser[_0x13b99b(0x311)],'className':currentUser[_0x13b99b(0x253)],'type':window['uploadMode'],'createdAt':serverTimestamp(),'likes':[],'comments':[],'archived':![]});if(!_0x57d6f3)alert('ƒêƒÉng\x20·∫£nh\x20th√†nh\x20c√¥ng!\x0a(AI\x20ƒë√£\x20t·ª±\x20vi·∫øt\x20caption\x20cho\x20b·∫°n\x20n·∫øu\x20b·∫°n\x20ƒë·ªÉ\x20tr·ªëng)');}}catch(_0xed122f){console[_0x13b99b(0x2a3)](_0xed122f),alert(_0x13b99b(0x358)+_0xed122f[_0x13b99b(0x2cc)]);}document['getElementById']('upload-overlay')[_0x13b99b(0x227)]['display']=_0x13b99b(0x2cf),_0x2c7420[_0x13b99b(0x23c)]='';};const optimizeUrl=_0xa4780f=>{const _0x50f03e=_0x8f774e;if(_0xa4780f[_0x50f03e(0x2aa)](_0x50f03e(0x30e)))return _0xa4780f['replace'](_0x50f03e(0x368),_0x50f03e(0x2da));return _0xa4780f;};function renderGrid(_0x53ee2f,_0x3f8a1a,_0x129e9b,_0x904b47){const _0x3f40d5=_0x8f774e;if(State[_0x3f40d5(0x39e)][_0x53ee2f])State[_0x3f40d5(0x39e)][_0x53ee2f]();const _0x17b1f8=onSnapshot(query(collection(db,_0x53ee2f),where(_0x3f40d5(0x3b4),'!=',!![])),_0x42b067=>{const _0x1c1cc2=_0x3f40d5,_0x3126bb=document[_0x1c1cc2(0x2d8)](_0x3f8a1a);if(!_0x3126bb)return;_0x3126bb[_0x1c1cc2(0x229)]='';let _0x1fb3e5={},_0x5216de={},_0x2253a7=[];_0x42b067[_0x1c1cc2(0x214)](_0x16592f=>_0x2253a7['push']({'id':_0x16592f['id'],..._0x16592f[_0x1c1cc2(0x39d)]()})),_0x2253a7[_0x1c1cc2(0x2e2)]((_0x46f388,_0x480c6e)=>(_0x480c6e[_0x1c1cc2(0x293)]?.['seconds']||0x0)-(_0x46f388[_0x1c1cc2(0x293)]?.[_0x1c1cc2(0x1f7)]||0x0));if(_0x53ee2f===_0x1c1cc2(0x3a8)&&_0x2253a7[_0x1c1cc2(0x1e2)]>0x0){const _0x21f7f6=[..._0x2253a7]['sort']((_0x184cf5,_0x52a405)=>(_0x52a405[_0x1c1cc2(0x346)]?_0x52a405['likes'][_0x1c1cc2(0x1e2)]:0x0)-(_0x184cf5['likes']?_0x184cf5[_0x1c1cc2(0x346)][_0x1c1cc2(0x1e2)]:0x0))[0x0];_0x21f7f6&&(document[_0x1c1cc2(0x2d8)](_0x1c1cc2(0x32c))[_0x1c1cc2(0x227)]['display']=_0x1c1cc2(0x2c0),document['getElementById'](_0x1c1cc2(0x299))[_0x1c1cc2(0x350)]=optimizeUrl(_0x21f7f6[_0x1c1cc2(0x29a)]),document[_0x1c1cc2(0x2d8)](_0x1c1cc2(0x308))[_0x1c1cc2(0x295)]=_0x1c1cc2(0x244),document[_0x1c1cc2(0x2d8)](_0x1c1cc2(0x298))[_0x1c1cc2(0x295)]=_0x21f7f6['desc'],document[_0x1c1cc2(0x2d8)](_0x1c1cc2(0x3b5))[_0x1c1cc2(0x295)]='‚Äî\x20'+_0x21f7f6[_0x1c1cc2(0x3b7)]);}_0x2253a7[_0x1c1cc2(0x214)](_0x3f3c3f=>{const _0x1e4b1d=_0x1c1cc2,_0x1f0495=_0x3f3c3f[_0x1e4b1d(0x346)]?_0x3f3c3f[_0x1e4b1d(0x346)][_0x1e4b1d(0x1e2)]:0x0;if(!_0x1fb3e5[_0x3f3c3f[_0x1e4b1d(0x3b7)]])_0x1fb3e5[_0x3f3c3f[_0x1e4b1d(0x3b7)]]=0x0;_0x1fb3e5[_0x3f3c3f[_0x1e4b1d(0x3b7)]]+=_0x1f0495;const _0x2b95f5=_0x3f3c3f[_0x1e4b1d(0x2ec)]||_0x1e4b1d(0x247);if(!_0x5216de[_0x2b95f5])_0x5216de[_0x2b95f5]=0x0;_0x5216de[_0x2b95f5]+=_0x1f0495;let _0x577591='';currentUser&&(currentUser[_0x1e4b1d(0x27b)]===_0x3f3c3f[_0x1e4b1d(0x27b)]||isAdmin(currentUser[_0x1e4b1d(0x386)]))&&(_0x577591=_0x1e4b1d(0x3ac)+_0x53ee2f+_0x1e4b1d(0x25b)+_0x3f3c3f['id']+_0x1e4b1d(0x25b)+_0x3f3c3f[_0x1e4b1d(0x237)]+_0x1e4b1d(0x201)+_0x53ee2f+_0x1e4b1d(0x25b)+_0x3f3c3f['id']+_0x1e4b1d(0x399));let _0x274520='';if(_0x3f3c3f['type']===_0x1e4b1d(0x1fb))_0x274520=_0x1e4b1d(0x2c4);else{if(_0x3f3c3f[_0x1e4b1d(0x37b)]==='contest')_0x274520=_0x1e4b1d(0x35a);}_0x3126bb[_0x1e4b1d(0x229)]+=_0x1e4b1d(0x1d8)+_0x53ee2f+_0x1e4b1d(0x25b)+_0x3f3c3f['id']+_0x1e4b1d(0x270)+_0x274520+_0x577591+'<div\x20class=\x22gallery-img-container\x22><img\x20src=\x22'+optimizeUrl(_0x3f3c3f['url'])+'\x22\x20class=\x22gallery-img\x22\x20loading=\x22lazy\x22></div><div\x20class=\x22gallery-info\x22><div\x20class=\x22gallery-title\x22>'+_0x3f3c3f['desc']+_0x1e4b1d(0x1f8)+(_0x3f3c3f[_0x1e4b1d(0x36b)]||_0x1e4b1d(0x259))+_0x1e4b1d(0x306)+(_0x3f3c3f[_0x1e4b1d(0x280)]||_0x3f3c3f[_0x1e4b1d(0x3b7)])+_0x1e4b1d(0x372)+(_0x3f3c3f[_0x1e4b1d(0x346)]?.[_0x1e4b1d(0x2aa)](currentUser?.[_0x1e4b1d(0x27b)])?_0x1e4b1d(0x255):_0x1e4b1d(0x2a4))+_0x1e4b1d(0x381)+_0x1f0495+'</span></div><div\x20class=\x22grid-actions\x22><button\x20class=\x22grid-act-btn\x22\x20onclick=\x22event.stopPropagation();\x20alert(\x27Link\x20·∫£nh:\x20'+_0x3f3c3f[_0x1e4b1d(0x29a)]+_0x1e4b1d(0x289);}),renderRank(_0x129e9b['id'],_0x1fb3e5),renderRank(_0x904b47['id'],_0x5216de);});State[_0x3f40d5(0x39e)][_0x53ee2f]=_0x17b1f8;}function renderRank(_0x85a88c,_0x3b47ce){const _0x3ca486=_0x8f774e,_0x2b5164=Object[_0x3ca486(0x35c)](_0x3b47ce)['sort']((_0x3b26f9,_0x1dc71c)=>_0x1dc71c[0x1]-_0x3b26f9[0x1])[_0x3ca486(0x31d)](0x0,0x5),_0x44dc0e=document[_0x3ca486(0x2d8)](_0x85a88c);if(!_0x44dc0e)return;_0x44dc0e[_0x3ca486(0x229)]='',_0x2b5164[_0x3ca486(0x214)]((_0x43b4b4,_0x100693)=>{const _0x268bc9=_0x3ca486;_0x44dc0e[_0x268bc9(0x229)]+=_0x268bc9(0x2ca)+(_0x100693===0x0?_0x268bc9(0x329):'')+_0x268bc9(0x3ab)+(_0x100693+0x1)+_0x268bc9(0x37e)+_0x43b4b4[0x0]+_0x268bc9(0x3c9)+_0x43b4b4[0x1]+'\x20<i\x20class=\x22fas\x20fa-heart\x22></i></td></tr>';});if(!_0x2b5164[_0x3ca486(0x1e2)])_0x44dc0e['innerHTML']=_0x3ca486(0x2ad);}window[_0x8f774e(0x240)]=async(_0x5f21ce,_0x3b0929)=>{const _0x18421d=_0x8f774e;currentImgId=_0x3b0929,currentImgCollection=_0x5f21ce,document[_0x18421d(0x2d8)](_0x18421d(0x2fe))['style'][_0x18421d(0x263)]=_0x18421d(0x2c0);const _0x184686=await getDoc(doc(db,_0x5f21ce,_0x3b0929)),_0x1a716c=_0x184686[_0x18421d(0x39d)](),_0x3ad600=document[_0x18421d(0x2d8)]('lb-zoom-area');_0x3ad600['classList'][_0x18421d(0x38e)](_0x18421d(0x2c9));const _0x22aaa4=document[_0x18421d(0x2d8)](_0x18421d(0x30a));_0x22aaa4[_0x18421d(0x227)][_0x18421d(0x1f4)]='scale(1)',_0x22aaa4['src']=optimizeUrl(_0x1a716c[_0x18421d(0x29a)]),document['getElementById']('lb-author-avatar')[_0x18421d(0x350)]=_0x1a716c[_0x18421d(0x36b)]||_0x18421d(0x22f),document[_0x18421d(0x2d8)](_0x18421d(0x367))[_0x18421d(0x229)]=_0x1a716c[_0x18421d(0x3b7)],document[_0x18421d(0x2d8)](_0x18421d(0x212))['innerText']=_0x1a716c[_0x18421d(0x280)]||'',document[_0x18421d(0x2d8)](_0x18421d(0x29b))[_0x18421d(0x295)]=_0x1a716c[_0x18421d(0x237)],document[_0x18421d(0x2d8)](_0x18421d(0x1d3))[_0x18421d(0x295)]=_0x1a716c[_0x18421d(0x346)]?_0x1a716c[_0x18421d(0x346)][_0x18421d(0x1e2)]:0x0;const _0x4ed34d=document['getElementById'](_0x18421d(0x38c));currentUser&&_0x1a716c[_0x18421d(0x346)]?.[_0x18421d(0x2aa)](currentUser[_0x18421d(0x27b)])?(_0x4ed34d['classList']['add'](_0x18421d(0x3db)),_0x4ed34d[_0x18421d(0x227)]['color']=_0x18421d(0x2f5)):(_0x4ed34d['classList'][_0x18421d(0x38e)](_0x18421d(0x3db)),_0x4ed34d['style'][_0x18421d(0x1ff)]=_0x18421d(0x206));const _0x36c120=document[_0x18421d(0x2d8)]('lb-owner-controls');currentUser&&(currentUser[_0x18421d(0x27b)]===_0x1a716c[_0x18421d(0x27b)]||isAdmin(currentUser[_0x18421d(0x386)]))?(_0x36c120['style'][_0x18421d(0x263)]=_0x18421d(0x2c0),document[_0x18421d(0x2f2)](_0x18421d(0x2c1))[_0x18421d(0x227)][_0x18421d(0x263)]=isAdmin(currentUser[_0x18421d(0x386)])?_0x18421d(0x225):_0x18421d(0x2cf)):_0x36c120[_0x18421d(0x227)][_0x18421d(0x263)]=_0x18421d(0x2cf),document[_0x18421d(0x2d8)](_0x18421d(0x288))['classList']['remove'](_0x18421d(0x1f3)),renderComments(_0x1a716c[_0x18421d(0x3a6)]||[]);},window[_0x8f774e(0x223)]=()=>{const _0x35f00b=_0x8f774e;document[_0x35f00b(0x2d8)](_0x35f00b(0x2fe))['style'][_0x35f00b(0x263)]=_0x35f00b(0x2cf),document[_0x35f00b(0x2d8)](_0x35f00b(0x288))[_0x35f00b(0x21d)][_0x35f00b(0x38e)](_0x35f00b(0x1f3));},window['toggleDetails']=()=>{const _0x514388=_0x8f774e;document[_0x514388(0x2d8)](_0x514388(0x288))[_0x514388(0x21d)]['toggle'](_0x514388(0x1f3));};let lastTap=0x0;const imgEl=document[_0x8f774e(0x2d8)](_0x8f774e(0x30a)),zoomArea=document[_0x8f774e(0x2d8)](_0x8f774e(0x290));zoomArea[_0x8f774e(0x254)]('touchend',_0x266d28=>{const _0x2f57af=_0x8f774e,_0x50560a=new Date()[_0x2f57af(0x32f)](),_0x4a5613=_0x50560a-lastTap;_0x4a5613<0x12c&&_0x4a5613>0x0&&(toggleZoom(_0x266d28),_0x266d28[_0x2f57af(0x2c5)]()),lastTap=_0x50560a;}),zoomArea[_0x8f774e(0x254)](_0x8f774e(0x245),toggleZoom);function toggleZoom(_0x549fae){const _0x1ab4c7=_0x8f774e;if(zoomArea[_0x1ab4c7(0x21d)][_0x1ab4c7(0x1eb)]('zoomed'))zoomArea[_0x1ab4c7(0x21d)][_0x1ab4c7(0x38e)](_0x1ab4c7(0x2c9)),imgEl[_0x1ab4c7(0x227)][_0x1ab4c7(0x1f4)]=_0x1ab4c7(0x3da);else{zoomArea['classList'][_0x1ab4c7(0x249)]('zoomed');let _0x36d8bb,_0x4ac0ca;_0x549fae[_0x1ab4c7(0x219)]&&_0x549fae[_0x1ab4c7(0x219)][_0x1ab4c7(0x1e2)]>0x0?(_0x36d8bb=_0x549fae[_0x1ab4c7(0x219)][0x0][_0x1ab4c7(0x3d4)],_0x4ac0ca=_0x549fae[_0x1ab4c7(0x219)][0x0][_0x1ab4c7(0x3bf)]):(_0x36d8bb=_0x549fae['clientX'],_0x4ac0ca=_0x549fae[_0x1ab4c7(0x3bf)]);const _0x21d633=zoomArea[_0x1ab4c7(0x27c)](),_0x4598ec=_0x36d8bb-_0x21d633[_0x1ab4c7(0x275)],_0x37298e=_0x4ac0ca-_0x21d633[_0x1ab4c7(0x35f)];imgEl[_0x1ab4c7(0x227)][_0x1ab4c7(0x21f)]=_0x4598ec+_0x1ab4c7(0x1fc)+_0x37298e+'px',imgEl['style'][_0x1ab4c7(0x1f4)]='scale(2.5)';}}window[_0x8f774e(0x351)]=async _0x54be60=>{const _0x3ffb91=_0x8f774e;if(!currentUser)return alert(_0x3ffb91(0x2ab));const _0x2cc728=document[_0x3ffb91(0x2d8)]('lb-comments-list'),_0x3e254c=document[_0x3ffb91(0x2a7)](_0x3ffb91(0x2f3));_0x3e254c[_0x3ffb91(0x2ec)]=_0x3ffb91(0x3a2),_0x3e254c[_0x3ffb91(0x229)]=_0x3ffb91(0x2e9)+currentUser[_0x3ffb91(0x311)]+_0x3ffb91(0x3d8)+currentUser[_0x3ffb91(0x39b)]+'</span><span\x20class=\x22lb-comment-text\x22>'+_0x54be60+'</span></div></div>',_0x2cc728['appendChild'](_0x3e254c),_0x2cc728[_0x3ffb91(0x265)]=_0x2cc728[_0x3ffb91(0x339)];const _0x225ed2={'uid':currentUser[_0x3ffb91(0x27b)],'name':currentUser['displayName'],'avatar':currentUser[_0x3ffb91(0x311)],'text':_0x54be60,'time':Date[_0x3ffb91(0x1e9)]()};await updateDoc(doc(db,currentCollection,currentImgId),{'comments':arrayUnion(_0x225ed2)});const _0x3f5dc5=await getDoc(doc(db,currentCollection,currentImgId));if(_0x3f5dc5[_0x3ffb91(0x2fb)]()){const _0x5523e9=_0x3f5dc5[_0x3ffb91(0x39d)]()['uid'];pushNotification(_0x5523e9,_0x3ffb91(0x338),'<b>'+currentUser['displayName']+_0x3ffb91(0x2ee)+_0x54be60+'\x22',currentImgId,currentCollection);}},window['pinPost']=async()=>{const _0x5ad05a=_0x8f774e;await setDoc(doc(db,_0x5ad05a(0x396),_0x5ad05a(0x2eb)),{'col':currentCollection,'id':currentImgId}),alert('ƒê√£\x20ghim\x20b√†i\x20vi·∫øt\x20l√™n\x20trang\x20ch·ªß!');},window[_0x8f774e(0x2ae)]=async()=>{const _0x5c2006=_0x8f774e;confirm(_0x5c2006(0x38b))&&(await deleteDoc(doc(db,currentCollection,currentImgId)),closeLightbox(),alert('ƒê√£\x20x√≥a\x20b√†i\x20vi·∫øt!'));},window[_0x8f774e(0x1dd)]=async()=>{const _0x54cca1=_0x8f774e,_0x57166e=prompt(_0x54cca1(0x39a));_0x57166e&&(await updateDoc(doc(db,currentCollection,currentImgId),{'desc':_0x57166e}),document[_0x54cca1(0x2d8)]('lb-desc')['innerText']=_0x57166e);},window['handleLike']=async()=>{const _0x2c7580=_0x8f774e;if(!currentUser)return alert('Vui\x20l√≤ng\x20ƒëƒÉng\x20nh·∫≠p\x20ƒë·ªÉ\x20th·∫£\x20tim!');const _0x40f34a=document[_0x2c7580(0x2d8)]('lb-like-btn'),_0x1fc7ea=document[_0x2c7580(0x2d8)](_0x2c7580(0x1d3));let _0x2980d1=parseInt(_0x1fc7ea[_0x2c7580(0x295)]);const _0x4ffefd=_0x40f34a[_0x2c7580(0x21d)]['contains'](_0x2c7580(0x3db));if(_0x4ffefd)_0x40f34a['classList'][_0x2c7580(0x38e)](_0x2c7580(0x3db)),_0x40f34a[_0x2c7580(0x227)][_0x2c7580(0x1ff)]=_0x2c7580(0x206),_0x1fc7ea['innerText']=Math['max'](0x0,_0x2980d1-0x1),await updateDoc(doc(db,currentCollection,currentImgId),{'likes':arrayRemove(currentUser[_0x2c7580(0x27b)])});else{_0x40f34a[_0x2c7580(0x21d)][_0x2c7580(0x249)](_0x2c7580(0x3db)),_0x40f34a[_0x2c7580(0x227)][_0x2c7580(0x1ff)]=_0x2c7580(0x2f5),_0x1fc7ea[_0x2c7580(0x295)]=_0x2980d1+0x1,await updateDoc(doc(db,currentCollection,currentImgId),{'likes':arrayUnion(currentUser[_0x2c7580(0x27b)])});const _0x4b4a02=await getDoc(doc(db,currentCollection,currentImgId));if(_0x4b4a02[_0x2c7580(0x2fb)]()){const _0x6c7ce3=_0x4b4a02[_0x2c7580(0x39d)]()[_0x2c7580(0x27b)];pushNotification(_0x6c7ce3,'like',_0x2c7580(0x30d)+currentUser[_0x2c7580(0x39b)]+_0x2c7580(0x379),currentImgId,currentCollection);}}};function renderComments(_0x58bb0e){const _0x424859=_0x8f774e,_0x4e8fb0=document[_0x424859(0x2d8)](_0x424859(0x252));_0x4e8fb0['innerHTML']='',_0x58bb0e[_0x424859(0x214)](_0x5916c3=>{const _0x41127=_0x424859;_0x4e8fb0['innerHTML']+=_0x41127(0x2a2)+(_0x5916c3[_0x41127(0x3c5)]||'https://via.placeholder.com/30')+_0x41127(0x3d8)+_0x5916c3[_0x41127(0x300)]+'</span><span\x20class=\x22lb-comment-text\x22>'+_0x5916c3[_0x41127(0x2dc)]+_0x41127(0x330);}),_0x4e8fb0['scrollTop']=_0x4e8fb0[_0x424859(0x339)];}window[_0x8f774e(0x1e4)]=async _0x3788f0=>{const _0x27566a=_0x8f774e;if(!currentUser||!isAdmin(currentUser['email']))return;Utils[_0x27566a(0x238)](!![],_0x27566a(0x382));const _0x3acd3d=new ExcelJS['Workbook'](),_0x3d3dee=_0x3acd3d[_0x27566a(0x361)]('DuLieu');if(_0x3788f0===_0x27566a(0x1db)){_0x3d3dee['columns']=[{'header':_0x27566a(0x1ef),'key':_0x27566a(0x300),'width':0x19},{'header':'Email','key':_0x27566a(0x386),'width':0x1e},{'header':'ID','key':'id','width':0xf},{'header':_0x27566a(0x36e),'key':'created','width':0x14},{'header':'L·ªõp','key':_0x27566a(0x253),'width':0xf},{'header':'Ho·∫°t\x20ƒë·ªông\x20cu·ªëi','key':_0x27566a(0x34c),'width':0x14},{'header':_0x27566a(0x235),'key':'count','width':0xf}];const _0x1f7bf8=await getDocs(collection(db,_0x27566a(0x1db)));_0x1f7bf8[_0x27566a(0x214)](_0x3e7a23=>{const _0x460fb4=_0x27566a,_0x41f4cf=_0x3e7a23[_0x460fb4(0x39d)]();_0x3d3dee[_0x460fb4(0x3af)]({'name':_0x41f4cf[_0x460fb4(0x39b)]||'','email':_0x41f4cf[_0x460fb4(0x386)]||'','id':_0x41f4cf[_0x460fb4(0x3bb)]||'','created':_0x41f4cf[_0x460fb4(0x293)]?new Date(_0x41f4cf[_0x460fb4(0x293)][_0x460fb4(0x1f7)]*0x3e8)[_0x460fb4(0x3dc)](_0x460fb4(0x353)):'','class':_0x41f4cf['class']||'','active':_0x41f4cf[_0x460fb4(0x29e)]?new Date(_0x41f4cf['lastActive']['seconds']*0x3e8)[_0x460fb4(0x3dc)](_0x460fb4(0x353)):'','count':_0x41f4cf['loginCount']||0x1});});}else{_0x3d3dee[_0x27566a(0x2d7)]=[{'header':_0x27566a(0x25f),'key':_0x27566a(0x26b),'width':0x19},{'header':'ID','key':_0x27566a(0x27b),'width':0xf},{'header':_0x27566a(0x23a),'key':_0x27566a(0x253),'width':0xa},{'header':'M√¥\x20t·∫£','key':_0x27566a(0x237),'width':0x28},{'header':_0x27566a(0x28c),'key':_0x27566a(0x346),'width':0xa},{'header':_0x27566a(0x391),'key':_0x27566a(0x29a),'width':0x28},{'header':_0x27566a(0x354),'key':_0x27566a(0x230),'width':0x14}];const _0x1c2be2=await getDocs(collection(db,_0x3788f0));_0x1c2be2['forEach'](_0x15d3f8=>{const _0x225c23=_0x27566a,_0x438a7c=_0x15d3f8[_0x225c23(0x39d)]();_0x3d3dee[_0x225c23(0x3af)]({'author':_0x438a7c[_0x225c23(0x3b7)],'uid':_0x438a7c[_0x225c23(0x280)]||'','class':_0x438a7c[_0x225c23(0x2ec)]||'','desc':_0x438a7c[_0x225c23(0x237)]||'','likes':_0x438a7c['likes']?_0x438a7c[_0x225c23(0x346)][_0x225c23(0x1e2)]:0x0,'url':_0x438a7c[_0x225c23(0x29a)],'date':_0x438a7c[_0x225c23(0x293)]?new Date(_0x438a7c[_0x225c23(0x293)][_0x225c23(0x1f7)]*0x3e8)['toLocaleString'](_0x225c23(0x353)):''});});}const _0x5034c8=_0x3d3dee[_0x27566a(0x21b)](0x1);_0x5034c8[_0x27566a(0x3cf)]={'bold':!![],'color':{'argb':_0x27566a(0x3b3)},'size':0xc},_0x5034c8[_0x27566a(0x1d9)]={'type':_0x27566a(0x226),'pattern':_0x27566a(0x3ae),'fgColor':{'argb':'FF2E7D32'}},_0x5034c8[_0x27566a(0x31b)]={'vertical':'middle','horizontal':_0x27566a(0x25a)},_0x5034c8[_0x27566a(0x284)]=0x1e,_0x3d3dee[_0x27566a(0x33a)]((_0xfa7aab,_0x230a73)=>{const _0x1dc07c=_0x27566a;_0xfa7aab[_0x1dc07c(0x3be)](_0x4f4e0e=>{const _0x18bfcc=_0x1dc07c;_0x4f4e0e[_0x18bfcc(0x359)]={'top':{'style':_0x18bfcc(0x21e)},'left':{'style':_0x18bfcc(0x21e)},'bottom':{'style':_0x18bfcc(0x21e)},'right':{'style':_0x18bfcc(0x21e)}},_0x4f4e0e[_0x18bfcc(0x31b)]={'vertical':'middle','wrapText':!![]};});});const _0x5a3518=await _0x3acd3d[_0x27566a(0x323)][_0x27566a(0x334)](),_0x573c70=new Blob([_0x5a3518],{'type':_0x27566a(0x2d6)});saveAs(_0x573c70,_0x27566a(0x28b)+_0x3788f0+'_'+new Date()[_0x27566a(0x2dd)]()['slice'](0x0,0xa)+_0x27566a(0x251)),Utils[_0x27566a(0x238)](![]);},window[_0x8f774e(0x2ed)]=async()=>{const _0x253066=_0x8f774e,_0x28599b=document[_0x253066(0x2d8)](_0x253066(0x364))[_0x253066(0x23c)];await setDoc(doc(db,_0x253066(0x396),_0x253066(0x3ce)),{'googleSheetUrl':_0x28599b},{'merge':!![]}),alert(_0x253066(0x36c));},window[_0x8f774e(0x256)]=async()=>{const _0xff2a39=_0x8f774e;await setDoc(doc(db,_0xff2a39(0x396),'config'),{'geminiKey':document[_0xff2a39(0x2d8)](_0xff2a39(0x347))[_0xff2a39(0x23c)]},{'merge':!![]}),alert('ƒê√£\x20l∆∞u\x20API\x20Key!\x20Vui\x20l√≤ng\x20t·∫£i\x20l·∫°i\x20trang.'),location[_0xff2a39(0x1e8)]();},window[_0x8f774e(0x221)]=async()=>{const _0x351192=_0x8f774e;await setDoc(doc(db,'settings',_0x351192(0x3ce)),{'maintenance':document['getElementById'](_0x351192(0x383))[_0x351192(0x31e)]},{'merge':!![]}),alert(_0x351192(0x213));},window[_0x8f774e(0x209)]=async()=>{const _0x51eb9c=_0x8f774e;await setDoc(doc(db,'settings','config'),{'locks':{'home':document[_0x51eb9c(0x2d8)](_0x51eb9c(0x257))['checked'],'greenclass':document['getElementById'](_0x51eb9c(0x321))[_0x51eb9c(0x31e)],'contest':document[_0x51eb9c(0x2d8)]('lock-contest')[_0x51eb9c(0x31e)],'activities':document['getElementById'](_0x51eb9c(0x217))['checked'],'guide':document['getElementById'](_0x51eb9c(0x35e))['checked'],'archive':document[_0x51eb9c(0x2d8)](_0x51eb9c(0x345))[_0x51eb9c(0x31e)]}},{'merge':!![]}),alert(_0x51eb9c(0x213));},window[_0x8f774e(0x3a9)]=async()=>{const _0x590374=_0x8f774e;await setDoc(doc(db,_0x590374(0x396),_0x590374(0x3ce)),{'deadlines':{'gallery':document[_0x590374(0x2d8)](_0x590374(0x27e))['value'],'contest':document['getElementById']('time-contest')['value']}},{'merge':!![]}),alert(_0x590374(0x213));},window[_0x8f774e(0x32b)]=async _0x551997=>{const _0x4ffc12=_0x8f774e;if(!confirm(_0x4ffc12(0x243)))return;const _0x1c3b27=prompt(_0x4ffc12(0x2c8));if(!_0x1c3b27)return;const _0x504c58=query(collection(db,_0x551997),where(_0x4ffc12(0x3b4),'!=',!![])),_0x3bccce=await getDocs(_0x504c58),_0x5649e0=[];_0x3bccce[_0x4ffc12(0x214)](_0x33d1dd=>_0x5649e0[_0x4ffc12(0x20d)](updateDoc(doc(db,_0x551997,_0x33d1dd['id']),{'archived':!![],'archiveLabel':_0x1c3b27}))),await Promise[_0x4ffc12(0x1f2)](_0x5649e0),await addDoc(collection(db,_0x4ffc12(0x3a0)),{'collection':_0x551997,'label':_0x1c3b27,'archivedAt':serverTimestamp()}),alert('Xong!');},window['loadArchiveSeasons']=async()=>{const _0x1de39f=_0x8f774e,_0x2bd5ef=document[_0x1de39f(0x2d8)](_0x1de39f(0x385));_0x2bd5ef['innerHTML']=_0x1de39f(0x292);const _0x4ce92c=query(collection(db,'archives_meta'),where(_0x1de39f(0x1fd),'==',activeArchiveTab)),_0x40f98d=await getDocs(_0x4ce92c),_0x57cf72=[];_0x40f98d['forEach'](_0x215aeb=>_0x57cf72[_0x1de39f(0x20d)](_0x215aeb[_0x1de39f(0x39d)]())),_0x57cf72['sort']((_0x41029f,_0x4e3aa8)=>(_0x4e3aa8['archivedAt']?.[_0x1de39f(0x1f7)]||0x0)-(_0x41029f[_0x1de39f(0x36d)]?.[_0x1de39f(0x1f7)]||0x0)),_0x57cf72['forEach'](_0x276d9b=>_0x2bd5ef[_0x1de39f(0x229)]+=_0x1de39f(0x29d)+_0x276d9b[_0x1de39f(0x246)]+'\x22>'+_0x276d9b[_0x1de39f(0x246)]+_0x1de39f(0x2e6));},window[_0x8f774e(0x322)]=async()=>{const _0x4e058f=_0x8f774e,_0x21ebfc=document['getElementById'](_0x4e058f(0x385))[_0x4e058f(0x23c)],_0x1589a5=document[_0x4e058f(0x2d8)](_0x4e058f(0x3b1))[_0x4e058f(0x23c)][_0x4e058f(0x373)](),_0x152f4c=document[_0x4e058f(0x2d8)](_0x4e058f(0x26d));_0x152f4c[_0x4e058f(0x229)]=_0x4e058f(0x24b);let _0x46ca8e;if(_0x21ebfc===_0x4e058f(0x2e8))_0x46ca8e=query(collection(db,activeArchiveTab),where('archived','==',!![]));else _0x46ca8e=query(collection(db,activeArchiveTab),where(_0x4e058f(0x3b4),'==',!![]),where(_0x4e058f(0x28d),'==',_0x21ebfc));const _0x4a81e1=await getDocs(_0x46ca8e);_0x152f4c[_0x4e058f(0x229)]='';if(_0x4a81e1[_0x4e058f(0x363)]){_0x152f4c[_0x4e058f(0x229)]='<p>Kh√¥ng\x20c√≥\x20d·ªØ\x20li·ªáu.</p>';return;}_0x4a81e1[_0x4e058f(0x214)](_0x13188f=>{const _0x4c19eb=_0x4e058f,_0x581a09=_0x13188f['data']();if(_0x1589a5&&!_0x581a09[_0x4c19eb(0x3b7)]['toLowerCase']()[_0x4c19eb(0x2aa)](_0x1589a5)&&!_0x581a09[_0x4c19eb(0x237)][_0x4c19eb(0x373)]()['includes'](_0x1589a5)&&!(_0x581a09['authorID']||'')[_0x4c19eb(0x373)]()['includes'](_0x1589a5))return;_0x152f4c[_0x4c19eb(0x229)]+=_0x4c19eb(0x1d8)+activeArchiveTab+_0x4c19eb(0x25b)+_0x13188f['id']+_0x4c19eb(0x22e)+_0x581a09[_0x4c19eb(0x29a)]+_0x4c19eb(0x35b)+_0x581a09['desc']+_0x4c19eb(0x241)+(_0x581a09['authorID']||_0x581a09[_0x4c19eb(0x3b7)])+'</span></div></div></div>';});},window[_0x8f774e(0x27f)]=_0x4ee35e=>{const _0x3fb480=_0x8f774e;activeArchiveTab=_0x4ee35e,document[_0x3fb480(0x320)]('.archive-tab')[_0x3fb480(0x214)](_0x12a3b3=>_0x12a3b3[_0x3fb480(0x21d)]['remove'](_0x3fb480(0x34c))),document[_0x3fb480(0x2d8)](_0x3fb480(0x22b)+_0x4ee35e)[_0x3fb480(0x21d)][_0x3fb480(0x249)]('active'),loadArchiveSeasons(),loadArchiveGrid();},window[_0x8f774e(0x26a)]=async()=>{const _0x29b757=_0x8f774e;await setDoc(doc(db,_0x29b757(0x396),'featured'),{'col':currentImgCollection,'id':currentImgId}),alert('ƒê√£\x20ghim!');},window[_0x8f774e(0x29f)]=async()=>{const _0x51d64a=_0x8f774e;if(!currentUser||!isAdmin(currentUser[_0x51d64a(0x386)]))return;const _0x255b34=document['getElementById']('user-table-body');_0x255b34[_0x51d64a(0x229)]=_0x51d64a(0x24b);const _0x24d656=await getDocs(collection(db,_0x51d64a(0x1db)));_0x255b34[_0x51d64a(0x229)]='',_0x24d656[_0x51d64a(0x214)](_0x3f05ef=>{const _0x2e5fc9=_0x51d64a,_0x25448a=_0x3f05ef[_0x2e5fc9(0x39d)](),_0x53a39c=_0x25448a['banned']?'<button\x20onclick=\x22togBan(\x27'+_0x3f05ef['id']+'\x27,0)\x22>M·ªü</button>':_0x2e5fc9(0x278)+_0x3f05ef['id']+_0x2e5fc9(0x3cb);_0x255b34['innerHTML']+=_0x2e5fc9(0x356)+_0x25448a['displayName']+'</td><td>'+_0x25448a[_0x2e5fc9(0x386)]+_0x2e5fc9(0x398)+(_0x25448a[_0x2e5fc9(0x253)]||'-')+'</td><td>'+(_0x25448a[_0x2e5fc9(0x393)]?_0x2e5fc9(0x390):_0x2e5fc9(0x327))+_0x2e5fc9(0x398)+_0x53a39c+'</td></tr>';});},window[_0x8f774e(0x389)]=async(_0x372cea,_0x1bc6f5)=>{const _0x58e245=_0x8f774e;confirm(_0x58e245(0x332))&&(await updateDoc(doc(db,_0x58e245(0x1db),_0x372cea),{'banned':!!_0x1bc6f5}),loadAdminData());},window[_0x8f774e(0x2df)]=async(_0x5b5f8e,_0x52e52a)=>{if(confirm('X√≥a\x20b√†i?'))await deleteDoc(doc(db,_0x5b5f8e,_0x52e52a));},window['editPost']=async(_0x512d29,_0x352ca7,_0x268ac4)=>{const _0x486e05=_0x8f774e,_0x47df25=prompt(_0x486e05(0x303),_0x268ac4);if(_0x47df25)await updateDoc(doc(db,_0x512d29,_0x352ca7),{'desc':_0x47df25});},window[_0x8f774e(0x333)]=async()=>{const _0x580353=_0x8f774e;confirm(_0x580353(0x22d))&&(await updateDoc(doc(db,_0x580353(0x1db),currentUser[_0x580353(0x27b)]),{'status':'deleted'}),location[_0x580353(0x1e8)]());},window['restoreAccount']=async()=>{const _0x3d79ca=_0x8f774e;await updateDoc(doc(db,_0x3d79ca(0x1db),currentUser[_0x3d79ca(0x27b)]),{'status':_0x3d79ca(0x34c)}),location[_0x3d79ca(0x1e8)]();};async function checkUniqueID(_0x513f88){const _0xfb067d=_0x8f774e,_0x108460=query(collection(db,'users'),where(_0xfb067d(0x3bb),'==',_0x513f88)),_0x429312=await getDocs(_0x108460);return _0x429312['empty'];}window['updateProfile']=async _0x341d5b=>{const _0x349d3b=_0x8f774e;_0x341d5b[_0x349d3b(0x2c5)]();const _0x9aba01=document[_0x349d3b(0x2d8)](_0x349d3b(0x2e5))['value'],_0x651d1c=document['getElementById'](_0x349d3b(0x281))[_0x349d3b(0x23c)],_0x28dcc4=document[_0x349d3b(0x2d8)]('edit-class')['value'],_0x5087cd=document[_0x349d3b(0x2d8)](_0x349d3b(0x32d))[_0x349d3b(0x23c)];if(_0x651d1c!==currentUser[_0x349d3b(0x3bb)]){const _0x533c45=await checkUniqueID(_0x651d1c);if(!_0x533c45)return alert('ID\x20n√†y\x20ƒë√£\x20c√≥\x20ng∆∞·ªùi\x20d√πng!');}const _0x3058a6=isAdmin(currentUser[_0x349d3b(0x386)])?_0x349d3b(0x1fe):_0x9aba01;await updateDoc(doc(db,'users',currentUser['uid']),{'displayName':_0x3058a6,'customID':_0x651d1c,'class':_0x28dcc4,'bio':_0x5087cd}),alert(_0x349d3b(0x213));};function handleRoute(){const _0x4a53b8=_0x8f774e,_0x2f5e05=window[_0x4a53b8(0x326)]['hash'][_0x4a53b8(0x31d)](0x1)||_0x4a53b8(0x3a1);showPage(_0x2f5e05);}window[_0x8f774e(0x254)](_0x8f774e(0x1f1),handleRoute),window[_0x8f774e(0x254)](_0x8f774e(0x3c6),handleRoute),window[_0x8f774e(0x38f)]=_0x5344ac=>{const _0x205026=_0x8f774e,_0x5dfd6b=[_0x205026(0x3a1),'greenclass','contest',_0x205026(0x23f),_0x205026(0x348),'guide',_0x205026(0x2db),'admin'];let _0x233e6b=_0x5dfd6b[_0x205026(0x2aa)](_0x5344ac)?_0x5344ac:_0x205026(0x3a1);if(_0x233e6b==='admin'){if(!currentUser)alert(_0x205026(0x294)),_0x233e6b=_0x205026(0x2db),window[_0x205026(0x326)][_0x205026(0x3b9)]='profile';else!isAdmin(currentUser[_0x205026(0x386)])&&(alert(_0x205026(0x1d2)),_0x233e6b='home',window[_0x205026(0x326)]['hash']='home');}document['querySelectorAll'](_0x205026(0x3b6))['forEach'](_0x3c9e60=>_0x3c9e60[_0x205026(0x21d)][_0x205026(0x38e)](_0x205026(0x34c)));const _0x3b3510=document[_0x205026(0x2d8)](_0x233e6b);if(_0x3b3510)_0x3b3510['classList']['add']('active');document[_0x205026(0x320)]('nav.pc-nav\x20a,\x20nav.mobile-nav\x20a')[_0x205026(0x214)](_0x51c2a0=>_0x51c2a0['classList']['remove'](_0x205026(0x20c)));if(document[_0x205026(0x2d8)]('menu-pc-'+_0x233e6b))document[_0x205026(0x2d8)](_0x205026(0x3de)+_0x233e6b)[_0x205026(0x21d)]['add'](_0x205026(0x20c));if(document[_0x205026(0x2d8)](_0x205026(0x371)+_0x233e6b))document[_0x205026(0x2d8)](_0x205026(0x371)+_0x233e6b)['classList']['add'](_0x205026(0x20c));_0x233e6b==='archive'&&(loadArchiveSeasons(),switchArchiveTab(_0x205026(0x3a8)));const _0x43e5de={'home':'Trang\x20Ch·ªß','greenclass':_0x205026(0x1f5),'contest':_0x205026(0x36a),'archive':'L∆∞u\x20Tr·ªØ','activities':'Ho·∫°t\x20ƒê·ªông','guide':_0x205026(0x1e5),'profile':'H·ªì\x20S∆°','admin':_0x205026(0x23d)};document[_0x205026(0x216)]=_0x205026(0x26e)+(_0x43e5de[_0x233e6b]||'A2K41');};const trashDB=[{'n':'V·ªè\x20s·ªØa','t':_0x8f774e(0x318),'c':'bin-recycle'},{'n':_0x8f774e(0x25d),'t':_0x8f774e(0x318),'c':'bin-recycle'},{'n':'Gi·∫•y\x20v·ª•n','t':'T√°i\x20ch·∫ø','c':_0x8f774e(0x2c7)},{'n':_0x8f774e(0x1d7),'t':_0x8f774e(0x342),'c':_0x8f774e(0x34d)},{'n':_0x8f774e(0x319),'t':'H·ªØu\x20c∆°','c':_0x8f774e(0x34d)},{'n':_0x8f774e(0x233),'t':_0x8f774e(0x3a5),'c':_0x8f774e(0x28e)}];window[_0x8f774e(0x378)]=()=>{const _0x2df550=_0x8f774e,_0x3908d7=document[_0x2df550(0x2d8)](_0x2df550(0x24c))[_0x2df550(0x23c)]['toLowerCase'](),_0xd80b5b=document[_0x2df550(0x2d8)](_0x2df550(0x3b0));_0xd80b5b['innerHTML']='',trashDB[_0x2df550(0x3cc)](_0x3e8e42=>_0x3e8e42['n']['toLowerCase']()[_0x2df550(0x2aa)](_0x3908d7))[_0x2df550(0x214)](_0x140667=>{const _0xf7c5be=_0x2df550;_0xd80b5b[_0xf7c5be(0x229)]+=_0xf7c5be(0x343)+_0x140667['c']+_0xf7c5be(0x355)+_0x140667['t']+'</div><strong>'+_0x140667['n']+_0xf7c5be(0x25c);});},window[_0x8f774e(0x378)](),document[_0x8f774e(0x2d8)](_0x8f774e(0x2de))[_0x8f774e(0x295)]=[_0x8f774e(0x317),_0x8f774e(0x28f),_0x8f774e(0x1df)][Math[_0x8f774e(0x1ee)](Math[_0x8f774e(0x336)]()*0x3)];const mainLoginBtn=document['getElementById'](_0x8f774e(0x316));mainLoginBtn&&mainLoginBtn[_0x8f774e(0x254)](_0x8f774e(0x3b2),()=>{const _0x1a3573=_0x8f774e;console[_0x1a3573(0x3cd)](_0x1a3573(0x38a)),signInWithPopup(auth,provider);});let deferredPrompt;const pcMenu=document['querySelector'](_0x8f774e(0x33d)),installLi=document['createElement']('li');installLi['innerHTML']='<a\x20id=\x22btn-install-pc\x22\x20style=\x22display:none;\x20color:yellow;\x20cursor:pointer\x22><i\x20class=\x22fas\x20fa-download\x22></i>\x20T·∫£i\x20App</a>',pcMenu[_0x8f774e(0x365)](installLi);const mobNav=document[_0x8f774e(0x2f2)](_0x8f774e(0x2d4)),installMob=document['createElement']('a');installMob[_0x8f774e(0x2ec)]='nav-item',installMob['id']=_0x8f774e(0x2b8),installMob[_0x8f774e(0x227)]['display']=_0x8f774e(0x2cf),installMob[_0x8f774e(0x229)]=_0x8f774e(0x239),mobNav['insertBefore'](installMob,mobNav[_0x8f774e(0x271)]),window[_0x8f774e(0x254)]('beforeinstallprompt',_0x5138cf=>{const _0x185abc=_0x8f774e;_0x5138cf['preventDefault'](),deferredPrompt=_0x5138cf,document[_0x185abc(0x2d8)](_0x185abc(0x274))[_0x185abc(0x227)]['display']=_0x185abc(0x2b3),document[_0x185abc(0x2d8)]('btn-install-mob')['style'][_0x185abc(0x263)]=_0x185abc(0x2c0);});async function installPWA(){const _0x446a3c=_0x8f774e;if(!deferredPrompt)return;deferredPrompt[_0x446a3c(0x3a7)]();const {outcome:_0x3b62c0}=await deferredPrompt[_0x446a3c(0x2c2)];deferredPrompt=null,document[_0x446a3c(0x2d8)](_0x446a3c(0x274))['style']['display']=_0x446a3c(0x2cf),document[_0x446a3c(0x2d8)]('btn-install-mob')['style'][_0x446a3c(0x263)]=_0x446a3c(0x2cf);}document[_0x8f774e(0x2d8)](_0x8f774e(0x274))['addEventListener'](_0x8f774e(0x3b2),installPWA),document[_0x8f774e(0x2d8)](_0x8f774e(0x2b8))[_0x8f774e(0x254)](_0x8f774e(0x3b2),installPWA);_0x8f774e(0x202)in navigator&&window['addEventListener'](_0x8f774e(0x3c6),()=>{const _0x3e8d06=_0x8f774e;navigator[_0x3e8d06(0x202)][_0x3e8d06(0x30f)]('./sw.js')[_0x3e8d06(0x375)](_0x5c38d8=>console[_0x3e8d06(0x3cd)](_0x3e8d06(0x325),_0x5c38d8))[_0x3e8d06(0x27d)](_0x16a251=>console[_0x3e8d06(0x3cd)](_0x3e8d06(0x337),_0x16a251));});
